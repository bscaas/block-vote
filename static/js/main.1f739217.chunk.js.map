{"version":3,"sources":["util/general-util.js","contract/BaseContract.js","Home.jsx","About.jsx","DecryptVote.jsx","Elections.jsx","Candidates.jsx","ipfs-upload.jsx","ElectionForm.jsx","CandidateForm.jsx","VoterForm.jsx","ElectionTally.jsx","Status.jsx","App.js","util/wallet-util.js","contract/ElectionContract.js","contract/VotingBoothContract.js","contract/ElectionCandidateContract.js","contract/VoterRegistrationContract.js","ElectionBallot.jsx","reportWebVitals.js","contract/ElectionTallyContract.js","index.js"],"names":["GeneralUtil","replace","c","crypto","getRandomValues","Uint8Array","toString","length","charset","x","i","push","parseInt","Math","random","join","BaseContract","config","this","require","Home","className","style","background","src","process","alt","class","React","Component","About","id","DecryptVote","props","messages","location","state","election_id","already_decrypted_messages","JSON","parse","localStorage","getItem","m","includes","window","web3","utils","keccak256","onClick","decrypt","decrypted_messages","decrypted_votes","Promise","all","map","message","resolv","fetch","then","response","text","WalletUtil","decrypted","decrypted_json","vote_id","contract","voting_booth","submitEncryptedMessages","election_tally","submitVoteFragments","concat","setItem","stringify","AppUtil","info","withRouter","Elections","editElection","election","history","fund","e","stopPropagation","electionResults","elections","startLoading","list","a","Election","setState","voter","getTurnout","voter_count","stopLoading","ipfsUrl","image_cid","title","name","candidate_count","phase","endCandidate","endRegistration","endVoting","endTally","finally","find","Candidates","can_register","candidates","editCandidate","ElectionCandidate","candidate","profile_image_hash","IPFSUpload","handleChange","event","selected_file","target","files","upload","arrayBuffer","bytes","ipfs","add","results","result","cid","path","error","type","onChange","ElectionForm","createElection","uuidv4","ipfs_upload","current","create","alert","updateElection","handleChangeName","value","gotoBallot","gotoDecrypt","getEncryptedMessages","gotoRegistration","Voter","createRef","election_candidate","button","voteButton","ref","CandidateForm","createCandidate","key","clashid","updateCandidate","VoterForm","registerVoter","blockchain_address","ethereum","selectedAddress","public_key","getPublicKey","register","nin","handleChangeNIN","ElectionTally","getTally","data","idx","findIndex","steps","href","renderChart","am4core","am4themes_animated","chart","am4charts","hiddenState","properties","opacity","paddingRight","categoryAxis","yAxes","dataFields","category","renderer","grid","template","strokeOpacity","minGridDistance","labels","dx","minWidth","tooltip","valueAxis","xAxes","inside","fillOpacity","min","cursorTooltipEnabled","baseGrid","dy","series","valueX","categoryY","tooltipText","pointerOrientation","columnsContainer","zIndex","columnTemplate","columns","height","maxHeight","column","cornerRadius","heatRules","property","dataField","max","mainContainer","mask","undefined","cursor","lineX","disabled","lineY","behavior","bullet","createChild","circle","radius","valign","align","isMeasured","interactionsEnabled","horizontalCenter","states","adapter","parent","pixelRadius","previousBullet","image","width","verticalCenter","propertyFields","events","on","dataItem","tooltipDataItem","children","getIndex","isHover","getKey","pixelWidth","Status","statusBox","msg","setTimeout","close","splice","router_config","component","is_menu","ElectionBallot","App","item","to","exact","createElement","document","getElementById","classList","loaderInterval","clearInterval","remove","loaderImage","loaderAngle","setInterval","transform","endpoint","status","addMessage","sigUtil","ethUtil","r","request","method","params","encryptionPublicKey","bufferToHex","Buffer","from","encrypt","encrypted_msg","ElectionContract","eth","Contract","abi_interface","address","methods","send","gas","readElection","deleteElection","listElections","call","listElectionIds","election_candidate_id","elected_candidate_id","VotingBoothContract","resolve","clearEncryptedMessages","EncryptedMessage","ElectionCandidateContract","candidate_id","readCandidate","deleteCandidate","listCandidates","listCandidateIds","profile_image_url","VoterRegistrationContract","voter_registration","reg_num","voted","decryptor1","decryptor2","decryptors","decryptors2","vote","byteArray","Array","byte","slice","candidate_key","n_decryptors","encrypted_msgs","promises","encryptions_1","pubkey","fragment","candidate_key_fragment","candidate_key_fragment_position","encryptions_2","decryptor","console","log","encryption1_cid","pubkey2","results2","r2","reject","encrypted2_cid","msg2","store_encryptions","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ElectionTallyContract","vote_fragments","ipfsClient","enable","Web3","loadWeb3","host","port","protocol","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.1f739217.chunk.js","sourcesContent":["export default class GeneralUtil {\n    \n    /**\n     * UUID version 4\n     * Implementation from  https://stackoverflow.com/a/2117523/1441011\n     */\n    static uuidv4() { \n        return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n            (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n        );\n    }\n\n    /**\n     * Built to have sparse collisions\n     * @param {*} length \n     * @param {*} charset \n     */\n    static clashid(length=10, charset=['1','2','3']){\n        let x  = []\n        for(let i=0;i<length;i++)x.push(charset[parseInt(Math.random()*3)])\n        return x.join('')\n    }\n    \n      \n}","export default class BaseContract{\n    config = null;\n    constructor(){\n        this.config = require('../config.json')\n    }\n}","import React from 'react'\nexport default class Home extends React.Component{\n\n    constructor(){\n        super()\n    }\n\n    render(){\n        return(\n            <div>\n\n                <section className=\"h-screen flex items-center justify-center border-b-2 border-green-400\">\n                    <div className=\"absolute opacity-50 h-full w-full\" style={{background: \"no-repeat center top url('\" + process.env.PUBLIC_URL + \"/assets/images/fist.jpg\"}}>\n\n                    </div>\n                    <h2 className=\"uppercase tracking-wide text-3xl text-green-600 font-bold\">Election voting on the blockchain</h2>\n                    <p className=\"mt-1 text-gray-500\">A solution that works!</p>\n                </section>\n\n                <section className=\"h-screen bg-opacity-50 flex items-center justify-center border-b-2 border-green-400\">\n                    <img className=\"rounded-lg md:w-56\" \n                    src={`${process.env.PUBLIC_URL}/assets/images/puzzle.png`} \n                    alt=\"Missing piece\"/>\n                    <h2 class=\"uppercase tracking-wide text-lg text-green-600 font-bold\">The stumbling Block</h2>\n                    <p class=\"mt-1 text-gray-500\">The African electoral systems are plagued with malpractise, violence and general apathy on the part of citizens.Not only that, there is also the issue of huge costs required to fund the process. The concept of democracy has therefore not been able to fulfill its purpose. </p>\n                </section>\n\n                <section className=\"h-screen bg-opacity-50 flex items-center justify-center border-b-2 border-green-400\">\n                    <h2 class=\"uppercase tracking-wide text-lg text-green-600 font-bold\">Our solution</h2>\n                    <p class=\"mt-1 text-gray-500\">A full on-chain voting system using \"Cascade Encrypted Obfuscation\" (CEO) technique that inherits the decentralized and auditable features of the blockchain. Voting would become digital immutable and transparent.</p>\n\n                    <img className=\"rounded-lg md:w-56\" \n                    src={`${process.env.PUBLIC_URL}/assets/images/blockchain.png`} \n                    alt=\"Blockchain\"/>\n                </section>\n                <section className=\"h-screen bg-opacity-50 flex items-center justify-center mb-0\">\n                    <img className=\"rounded-lg md:w-56\" \n                    src={`${process.env.PUBLIC_URL}/assets/images/earn_rewards.png`} \n                    alt=\"logo\"/>\n                    <h2 class=\"uppercase tracking-wide text-lg text-green-600 font-bold\">Earn Rewards</h2>\n                    <p class=\"mt-1 text-gray-500\">Get rewarded for being an active citizen! Earn our Liberty Token (LBT) as you complete the registration cycle and vote for your desired candidate. Participation in government has never been better!</p>\n                </section>\n            </div>\n        )\n    }\n} ","import React from 'react'\nimport './About.css'\n\nexport default class About extends React.Component{\n\n    constructor(){\n        super()\n    }\n\n    render(){\n        return(\n            <div class=\"mt-4 md:mt-0 md:ml-6\">\n                <section id=\"about1\" className=\"h-screen bg-opacity-50 flex items-center justify-center mb-0  bg-auto bg-no-repeat bg-center\" style={{background: \"url('\" + process.env.PUBLIC_URL + \"/assets/images/multiethnic-group-hands-raised.jpg\"}}>\n\n                </section>\n                <div>\n                    <h2 class=\"block mt-1 text-lg leading-tight font-semibold text-gray-900 hover:underline\">BlockVote | Everything You Need To Know!</h2>\n                    <p>\n                    This Application is for election & polling at any scale.\n                    Fortified with encrytion obfusication in order to obscure the voters from thier vote making it nearly imposible to see which candidate a voter voted.</p>\n                    <p>These application has an inbuilt reward system to incentivise the voters. \n                    Electorial processes can be overwhelming most of the time and as sign of good fate its only natural to want to support the people for thier cooperation.</p>\n                    <p>The more processes you complete the more you earn, this way everyone will be willing to participate. Everyone must pre-register to vote prior to election.</p>\n                    <p>Though the infomation on the block chain is public, the identities of the voters cannot be easily figured out.</p>\n                </div>\n                <div>\n                    <p></p>\n                    <h2 class=\"block mt-1 text-lg leading-tight font-semibold text-gray-900 hover:underline\">How To Vote</h2>\n                    <p>Every voter must go to the registration portal and register to vote.</p>\n                </div>\n            </div>\n        )\n    }\n} ","import React from 'react'\nimport WalletUtil from './util/wallet-util'\nimport { withRouter } from 'react-router-dom'\nimport { AppUtil } from './App'\n\n\nexport  class DecryptVote extends React.Component {\n    constructor(props){\n        super(props)\n        this.messages = []\n        if(props.location.state){\n            this.election_id = props.location.state.election_id\n            this.already_decrypted_messages = JSON.parse(localStorage.getItem('decrypt'+this.election_id)) || []\n\n            for(let m of props.location.state.messages){\n                if(!this.already_decrypted_messages.includes(window.web3.utils.keccak256(m).toString())){\n                    this.messages.push(m)\n                }\n                \n            }\n        }\n        \n    }\n\n    componentDidMount(){\n       \n    }\n\n    render(){\n        return(\n            // <div>\n            //     {this.state.messages.map((m)=>{\n            //             return <p>{m.blockchain_address}</p>\n            //         })}        \n            // </div>\n            <div>\n                {this.messages.length} messages to decrypt.\n                <br></br>\n                <button onClick={()=>this.decrypt()}>Decrypt</button>\n            </div>\n        )\n    }\n\n    decrypt(){\n        let decrypted_messages = []\n        let decrypted_votes = []\n        \n        //Decrypt all encrypted messages\n        Promise.all(this.messages.map((message)=>{\n            return new Promise((resolv)=>{\n                fetch(\"https://ipfs.infura.io/ipfs/\"+message).then((response)=>{\n                    response.text().then((text)=>{\n                        WalletUtil.decrypt(text).then((decrypted)=>{\n                            let decrypted_json = JSON.parse(decrypted)\n                            if(decrypted_json.vote_id){\n                                decrypted_votes.push(decrypted_json)\n                            }\n                            else{\n                                decrypted_messages.push(decrypted_json)\n                            }\n                            resolv()\n                        })\n                    })\n                })\n                \n            })\n        })).then(()=>{ //Submit decryptions to relevant contracts\n            Promise.all([\n                window.contract.voting_booth.submitEncryptedMessages(this.election_id, decrypted_messages),\n                window.contract.election_tally.submitVoteFragments(this.election_id, decrypted_votes)\n            ]).then(()=>{\n                this.already_decrypted_messages = this.already_decrypted_messages.concat(this.messages.map((m)=>window.web3.utils.keccak256(m).toString()))\n                localStorage.setItem('decrypt'+this.election_id, JSON.stringify(this.already_decrypted_messages))\n                AppUtil.info(\"Successfully decrypted \" + this.messages.length + \" messages.\")\n            })\n            \n        })\n\n        \n        \n    }   \n    \n}\n\nexport default withRouter(DecryptVote);\n","import React from 'react'\nimport { withRouter } from 'react-router-dom';\nimport GeneralUtil from './util/general-util';\nimport { Election } from './contract/ElectionContract';\nimport { AppUtil } from './App';\n\nexport  class Elections extends React.Component{\n    \n    constructor(){\n        super()\n        this.elections = []\n        AppUtil.startLoading()\n        window.contract.election.list().then((elections)=>{\n            this.elections = elections.map((a)=>new Election(...a))\n            this.setState({}) //Call setstate to re-render UI\n            for(let e of this.elections){\n                window.contract.voter.getTurnout(e.id).then((c)=>{\n                    e.voter_count = c\n                    this.setState({}) //Call setstate to re-render UI\n\n                })\n            }\n\n            AppUtil.stopLoading()\n        })\n    }\n\n    render(){\n        return(\n            <div className=\"elections\">\n                <h1 className=\"mt-5 text-2xl\">Elections<i className=\"fas fa-plus-circle float-right\" onClick={()=>{this.editElection(new Election('',''))}}></i></h1>\n                {this.elections.map((election)=>{\n                    return(\n                        <div className=\" w-full lg:max-w-full lg:flex\">\n                            <div className=\"h-48 lg:h-auto lg:w-48 flex-none bg-cover border-2 border-green-400 rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden\" style={{\"background-image\": \"url('\" + AppUtil.ipfsUrl(election.image_cid) + \"')\"}} title=\"Mountain\">\n                            </div>\n                            <div className=\"w-full border-r border-b border-l border-gray-400 lg:border-l-0 lg:border-t lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal\" onClick={()=>{this.editElection(election)}}>\n                                <div className=\"mb-8\">\n                                    <p className=\"text-sm text-gray-600 flex items-center\">\n                                    <img className=\"w-6\" src={`${process.env.PUBLIC_URL}/assets/images/liberty.png`} />\n                                        122 522 901 LBT FUNDED\n                                    <img className=\"ml-4 w-6\" src={`${process.env.PUBLIC_URL}/assets/images/liberty.png`} />\n                                        122 522 901 LBT REWARDED\n                                    </p>\n                                    \n                                <div className=\"text-gray-900 font-bold text-xl mb-2\">{election.name}</div>\n                                    <p className=\"text-gray-700 text-base\">{election.voter_count} Registered Voters</p>\n                                    <p className=\"text-gray-700 text-base\">{election.candidate_count || 0} Registered Candidates</p>\n                                </div>\n                                <div className=\"flex items-center\">\n                                    <span className=\"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full\">Phase: {election.phase}</span>\n                                    \n                                    <span className=\"ml-auto order-2\">\n                                        <button className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full mr-2\" onClick={(e)=>this.fund(election, e)}>Fund</button>\n                                        {   election.phase == 'Candidate'\n                                            ? <button className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={(e)=>this.endCandidate(election.id, e)}>End Candidate Registration</button>\n                                            : (election.phase == 'Registration'\n                                            ? <button className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={(e)=>this.endRegistration(election.id, e)}>End Voter Registration</button>\n                                            : (election.phase == 'Voting'\n                                                ? <button className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full right-0\" onClick={(e)=>this.endVoting(election.id, e)}>End Voting</button>\n                                                : (election.phase == 'Tally'\n                                                    ? <button className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={(e)=>this.endTally(election.id, e)}>End Tally</button>\n                                                    : <button className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={(e)=>this.electionResults(election, e)}>Election Results</button>)\n                                                \n                                                )\n                                            \n                                            )\n                                        \n                                        }\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n\n                    )\n                })}\n            </div>\n            \n        )\n    }\n\n    editElection = (election)=>{\n        this.props.history.push('/election-form', {election: election })\n    }\n\n    fund = (election, e)=>{\n        e.stopPropagation();\n\n        AppUtil.info(\"Coming soon!\")\n\n    }\n\n    endCandidate(election_id, e){\n        e.stopPropagation();\n        AppUtil.startLoading()\n        window.contract.election.endCandidate(election_id).finally(()=>{\n            this.elections.find((election)=>election.id == election_id).phase = 'Registration'\n            this.setState({}) //Call setstate to re-render UI\n\n            AppUtil.info(\"Candidate Registration ended. Now in Voter Registration.\")\n            AppUtil.stopLoading()\n        })\n        return false\n    }\n    endRegistration(election_id, e){\n        e.stopPropagation();\n        AppUtil.startLoading()\n        window.contract.election.endRegistration(election_id).finally(()=>{\n            this.elections.find((election)=>election.id == election_id).phase = 'Voting'\n            this.setState({}) //Call setstate to re-render UI\n            AppUtil.info(\"Voter Registration ended. Now in Voting.\")\n            AppUtil.stopLoading()\n        })\n        return false\n    }\n    endVoting(election_id, e){\n        e.stopPropagation();\n        AppUtil.startLoading()\n        window.contract.election.endVoting(election_id).finally(()=>{\n            this.elections.find((election)=>election.id == election_id).phase = 'Tally'\n            this.setState({}) //Call setstate to re-render UI\n            AppUtil.info(\"Voting ended. Now in Tallying.\")\n            AppUtil.stopLoading()\n        })\n        return false\n    }\n    endTally(election_id, e){\n        e.stopPropagation();\n        AppUtil.startLoading()\n        window.contract.election.endTally(election_id).finally(()=>{\n            this.elections.find((election)=>election.id == election_id).phase = 'Ended'\n            this.setState({}) //Call setstate to re-render UI\n            AppUtil.info(\"Tallying ended. The election has ended\")\n            AppUtil.stopLoading()\n        })\n        return false\n    }\n    electionResults = (election, e)=>{\n        e.stopPropagation();\n        this.props.history.push('/election-tally', {election: election })\n        return false\n    }\n} \nexport default withRouter(Elections);","import React from 'react'\nimport { withRouter } from 'react-router-dom'\nimport { ElectionCandidate } from './contract/ElectionCandidateContract'\nimport GeneralUtil from './util/general-util'\nimport { AppUtil } from './App'\nexport class Candidates extends React.Component{\n\n    constructor(props){\n        super()\n        this.election_id = props.election_id\n        this.can_register = props.can_register\n        this.candidates = props.candidates\n    }\n\n    render(){\n        return(\n            <div className=\"candidates\">\n                {this.can_register \n                ? <button className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={()=>{this.editCandidate(new ElectionCandidate('','',this.election_id, '','',''))}}>Create</button>\n                : ''}\n                \n                {this.candidates.map((candidate)=>{\n                    return(\n\n                        <div className=\" w-full lg:max-w-full lg:flex\"  >\n                            <div className=\"h-32 lg:w-32 flex-none bg-cover border-2 border-green-400 rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden\" style={{\"background-image\": \"url('\" + AppUtil.ipfsUrl(candidate.profile_image_hash) + \"')\"}} title=\"Mountain\">\n                            </div>\n                            <div className=\"w-full border-r border-b border-l border-gray-400 lg:border-l-0 lg:border-t lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal\" onClick={()=>{this.editCandidate(candidate)}}>\n                                <div className=\"mb-8\">\n                                    <p className=\"text-sm text-gray-600 flex items-center\">\n                                    </p>\n                                    <div className=\"text-gray-900 font-bold text-xl mb-2\">{candidate.name}</div>\n                                </div>\n                                \n                            </div>\n                        </div>\n                    )\n                })}\n\n\n                \n            </div>\n            \n        )\n    }\n\n    editCandidate(candidate){\n        this.props.history.push('/candidate-form', {candidate: candidate})\n    }\n} \nexport default withRouter(Candidates);\n","import React from 'react'\nimport { AppUtil } from './App';\n\nexport default class IPFSUpload extends React.Component{\n    constructor(){\n        super()\n    }\n\n    handleChange = (event)=>{\n        // Update the state\n        this.selected_file = event.target.files[0]\n        this.setState({});\n    }\n\n    upload = async ()=>{\n        AppUtil.startLoading()\n        if(this.selected_file){\n            let bytes = await this.selected_file.arrayBuffer()\n            let results = await window.ipfs.add(bytes)\n\n            for await (const result of results){\n                this.cid = result.path            \n            }\n            AppUtil.info(\"File upload successful.\")\n        }\n        else{\n            AppUtil.error(\"Select a file before uploading.\")\n            \n        }\n\n        AppUtil.stopLoading()\n    }\n\n    render(){\n        return(\n            <span>\n                <input type=\"file\" onChange={this.handleChange} />\n                <button className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={this.upload}>Upload</button>\n            </span>\n        \n        )\n    }\n}","import React from 'react'\nimport GeneralUtil from './util/general-util'\nimport { withRouter } from 'react-router-dom'\nimport Candidates from './Candidates'\nimport { Voter } from './contract/VoterRegistrationContract'\nimport { AppUtil } from './App'\nimport IPFSUpload from './ipfs-upload'\nexport class ElectionForm extends React.Component{\n\n    constructor(props){\n        super()\n        this.candidates = []\n        this.election = props.location.state.election;\n        this.ipfs_upload = React.createRef()\n\n        if(this.election.id){\n\n            AppUtil.startLoading()\n            window.contract.election_candidate.list(this.election.id).then((candidates)=>{\n                this.candidates.length = 0\n                this.candidates.push(...candidates)\n                this.setState({}) //Call setstate to re-render UI\n            \n                AppUtil.stopLoading()    \n            })\n        }\n    }\n\n    render(){\n\n        let button;\n        \n        if(this.election.id ){\n            button = <button className=\"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={this.updateElection}>Update</button>\n        }\n        else{\n            button = <button className=\"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={this.createElection}>Create</button>\n        }\n\n        let voteButton = '';\n\n        if(this.election.phase == 'Registration'){\n            voteButton = <button className=\"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={this.gotoRegistration}>Register to Vote</button>\n        }\n        else if(this.election.phase == 'Voting')\n        {\n            voteButton = <span className=\"float-right\">\n                            <button className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={this.gotoBallot}>Vote</button>\n                            <button className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={this.gotoDecrypt}>Decrypt</button>\n                        </span>\n        }   \n        \n\n        return(\n            <div className=\"election mb-10 mt-10\">\n                <h3 className=\"text-2xl\">Election</h3> {voteButton}\n                <label>Name: </label>\n                <input type=\"text\" value={this.election.name} onChange={this.handleChangeName}/>\n                <br/>\n                <label>Banner:</label>\n                <IPFSUpload ref={this.ipfs_upload}></IPFSUpload>\n                {button}                \n                \n                \n                <h3 className=\"text-xl\" >Candidates</h3>\n                { this.election.id  \n                    ? <Candidates election_id={this.election.id} can_register={this.election.phase == 'Candidate'} candidates={this.candidates}></Candidates>\n                    : ''\n                }\n            </div>\n            \n        )\n    }\n\n    createElection = ()=>{\n        AppUtil.startLoading()\n        this.election.id = GeneralUtil.uuidv4()\n        this.election.image_cid = this.ipfs_upload.current.cid\n        window.contract.election.create(this.election).then(()=>{\n            alert(this.election.name + ' has been created with id '+ this.election.id)\n            this.setState({}) //Call setstate to re-render UI\n            AppUtil.info('Successfully created election.')\n            AppUtil.stopLoading()\n        }, ()=>{\n            AppUtil.error('Failed to create election.')\n            AppUtil.stopLoading()\n        })\n        \n    }\n    updateElection = ()=>{\n        AppUtil.info(this.election.name + ' has been updated (Coming soon!)')\n    }\n\n    handleChangeName = (event)=>{\n        this.election.name = event.target.value\n        this.setState({}) //Call setstate to re-render UI\n    }\n\n    gotoBallot = ()=>{\n        this.props.history.push('/ballot', {election: this.election, candidates: this.candidates })\n    }\n    gotoDecrypt = ()=>{\n        window.contract.voting_booth.getEncryptedMessages(this.election.id).then((messages)=>{\n            this.props.history.push('/decrypt', {messages: messages, election_id: this.election.id })\n        })\n    }\n\n    gotoRegistration = ()=>{\n        this.props.history.push('/voter-form', {election: this.election, voter: new Voter(0,'','',false) })\n    }\n} \nexport default withRouter(ElectionForm);","import React from 'react'\nimport GeneralUtil from './util/general-util'\nimport { withRouter } from 'react-router-dom'\nimport { AppUtil } from './App';\nimport IPFSUpload from './ipfs-upload';\nexport class CandidateForm extends React.Component{\n\n    constructor(props){\n        super()\n        \n        this.candidate = props.location.state.candidate;\n        this.ipfs_upload = React.createRef()\n    }\n\n    render(){\n\n        let button;\n        \n        if(this.candidate.id ){\n            button = <button className=\"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={this.updateCandidate}>Update</button>\n        }\n        else{\n            button = <button className=\"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={this.createCandidate}>Create</button>\n        }\n\n        return(\n            <div className=\"candidate mt-10 mb-10\">\n                <h2 className=\"text-2xl\">Candidate</h2>\n                <label>Name: </label>\n                <input type=\"text\" value={this.candidate.name} onChange={this.handleChangeName}/>\n                <br/>\n                <IPFSUpload ref={this.ipfs_upload}></IPFSUpload>\n                {button}                \n\n            </div>\n            \n        )\n    }\n\n    createCandidate = ()=>{\n        AppUtil.startLoading()\n        this.candidate.id = GeneralUtil.uuidv4()\n        this.candidate.key = GeneralUtil.clashid()\n        this.candidate.profile_image_hash = this.ipfs_upload.current.cid\n\n        window.contract.election_candidate.createCandidate(this.candidate.election_id, this.candidate).then(()=>{\n            this.setState({}) //Call setstate to re-render UI, ()=>{\n            AppUtil.info(\"Successfully created candidate.\")\n            AppUtil.stopLoading()\n            \n        }, ()=>{\n            AppUtil.info(\"Failed to create candidate.\")\n\n            AppUtil.stopLoading()\n        })\n        \n    }\n    updateCandidate = ()=>{\n        AppUtil.info(this.candidate.name + ' has been updated (Coming soon!)')\n    }\n\n    handleChangeName = (event)=>{\n        this.candidate.name = event.target.value\n        this.setState({}) //Call setstate to re-render UI\n    }\n} \n\nexport default withRouter(CandidateForm);","import React from 'react'\nimport GeneralUtil from './util/general-util'\nimport { withRouter } from 'react-router-dom'\nimport Candidates from './Candidates'\nimport { AppUtil } from './App'\nimport WalletUtil from './util/wallet-util'\nexport class VoterForm extends React.Component{\n\n    constructor(props){\n        super()\n        this.voter = props.location.state.voter;\n        this.election_id = props.location.state.election.id\n    }\n\n    render(){\n\n        \n\n        return(\n            <div className=\"voter mb-10 mt-10\">\n                <label>National Identity Number: </label>\n                <input type=\"text\" value={this.voter.name} onChange={this.handleChangeNIN}/>\n                <button className=\"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={this.registerVoter}>Register</button>             \n                { this.voter.id\n                    ? <Candidates can_register={this.voter.phase != 'Candidate'} candidates={this.candidates}></Candidates>\n                    : ''\n                }\n            </div>\n            \n        )\n    }\n\n    registerVoter = ()=>{\n        AppUtil.startLoading()\n\n        this.voter.id = 0\n        this.voter.blockchain_address = window.ethereum.selectedAddress\n        this.voter.public_key = WalletUtil.getPublicKey().then((public_key)=>{\n            this.voter.public_key = public_key\n            window.contract.voter.register(this.election_id, this.voter).then(()=>{\n                alert(this.voter.nin + ' has been registered with id '+ this.voter.id)\n                this.setState({}) //Call setstate to re-render UI\n                AppUtil.info(\"Successfully registered to vote.\")\n                AppUtil.stopLoading()\n            }, ()=>{\n                AppUtil.info(\"Failed to register to vote.\")\n                AppUtil.stopLoading()\n            })\n        })\n        \n        \n    }\n\n    handleChangeNIN = (event)=>{\n        this.voter.nin = event.target.value\n        this.setState({}) //Call setstate to re-render UI\n    }\n\n} \nexport default withRouter(VoterForm);","/* Imports */\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\nimport { withRouter } from 'react-router-dom'\nimport React from 'react'\nimport { AppUtil } from \"./App\";\nimport { findIndex } from \"@amcharts/amcharts4/.internal/core/utils/Iterator\";\n\n\nexport class ElectionTally extends React.Component{\n    \n\n    constructor(props){\n        super()\n        this.election = {name: \"Unnamed\", id: \"none-existent-id\"}\n\n        if(props && props.location && props.location.state){\n            this.election = props.location.state.election;\n        }\n            \n    }\n\n    componentDidMount(){\n\n        AppUtil.startLoading()\n\n        window.contract.election_tally.getTally(this.election.id).then((results)=>{\n\n            window.contract.election_candidate.list(this.election.id).then((candidates)=>{\n\n                \n                let data = []\n                for(let c of candidates){\n\n                    let idx = results[0].findIndex((x)=>x==c.key)\n\n                    if(idx > -1){\n                        data.push({name: c.name,\n                            steps: results[1][idx],\n                            href: AppUtil.ipfsUrl(c.profile_image_hash)\n                        })\n                    }\n                }\n\n\n                this.renderChart(data)\n                AppUtil.stopLoading()\n\n\n\n            })\n\n            \n        },()=>{AppUtil.stopLoading()})\n\n      \n    }\n\n\n    render(){\n        return(\n            <div>\n                <h1 className=\"text-2xl\">{this.election.name} Tally Results</h1>\n                <div style={{\"min-height\": '700px'}} id=\"chartdiv\"></div>\n            </div>\n        \n        )\n    }\n\n\n    renderChart(data){\n\n  /* Chart code */\n        // Themes begin\n        am4core.useTheme(am4themes_animated);\n        // Themes end\n\n        /**\n         * Chart design taken from Samsung health app\n         */\n\n        let chart = am4core.create(\"chartdiv\", am4charts.XYChart);\n        chart.hiddenState.properties.opacity = 0; // this creates initial fade-in\n\n        chart.paddingRight = 40;\n\n        chart.data = data\n\n        let categoryAxis = chart.yAxes.push(new am4charts.CategoryAxis());\n        categoryAxis.dataFields.category = \"name\";\n        categoryAxis.renderer.grid.template.strokeOpacity = 0;\n        categoryAxis.renderer.minGridDistance = 10;\n        categoryAxis.renderer.labels.template.dx = -40;\n        categoryAxis.renderer.minWidth = 120;\n        categoryAxis.renderer.tooltip.dx = -40;\n\n        let valueAxis = chart.xAxes.push(new am4charts.ValueAxis());\n        valueAxis.renderer.inside = true;\n        valueAxis.renderer.labels.template.fillOpacity = 0.3;\n        valueAxis.renderer.grid.template.strokeOpacity = 0;\n        valueAxis.min = 0;\n        valueAxis.cursorTooltipEnabled = false;\n        valueAxis.renderer.baseGrid.strokeOpacity = 0;\n        valueAxis.renderer.labels.template.dy = 20;\n\n        let series = chart.series.push(new am4charts.ColumnSeries);\n        series.dataFields.valueX = \"steps\";\n        series.dataFields.categoryY = \"name\";\n        series.tooltipText = \"{valueX.value}\";\n        series.tooltip.pointerOrientation = \"vertical\";\n        series.tooltip.dy = - 30;\n        series.columnsContainer.zIndex = 100;\n\n        let columnTemplate = series.columns.template;\n        columnTemplate.height = am4core.percent(50);\n        columnTemplate.maxHeight = 50;\n        columnTemplate.column.cornerRadius(60, 10, 60, 10);\n        columnTemplate.strokeOpacity = 0;\n\n        series.heatRules.push({ target: columnTemplate, property: \"fill\", dataField: \"valueX\", min: am4core.color(\"#e5dc36\"), max: am4core.color(\"#5faa46\") });\n        series.mainContainer.mask = undefined;\n\n        let cursor = new am4charts.XYCursor();\n        chart.cursor = cursor;\n        cursor.lineX.disabled = true;\n        cursor.lineY.disabled = true;\n        cursor.behavior = \"none\";\n\n        let bullet = columnTemplate.createChild(am4charts.CircleBullet);\n        bullet.circle.radius = 30;\n        bullet.valign = \"middle\";\n        bullet.align = \"left\";\n        bullet.isMeasured = true;\n        bullet.interactionsEnabled = false;\n        bullet.horizontalCenter = \"right\";\n        bullet.interactionsEnabled = false;\n\n        let hoverState = bullet.states.create(\"hover\");\n        let outlineCircle = bullet.createChild(am4core.Circle);\n        outlineCircle.adapter.add(\"radius\", function (radius, target) {\n            let circleBullet = target.parent;\n            return circleBullet.circle.pixelRadius + 10;\n        })\n\n        let image = bullet.createChild(am4core.Image);\n        image.width = 60;\n        image.height = 60;\n        image.horizontalCenter = \"middle\";\n        image.verticalCenter = \"middle\";\n        image.propertyFields.href = \"href\";\n\n        image.adapter.add(\"mask\", function (mask, target) {\n            let circleBullet = target.parent;\n            return circleBullet.circle;\n        })\n\n        let previousBullet;\n        chart.cursor.events.on(\"cursorpositionchanged\", function (event) {\n            let dataItem = series.tooltipDataItem;\n\n            if (dataItem.column) {\n                let bullet = dataItem.column.children.getIndex(1);\n\n                if (previousBullet && previousBullet != bullet) {\n                    previousBullet.isHover = false;\n                }\n\n                if (previousBullet != bullet) {\n\n                    let hs = bullet.states.getKey(\"hover\");\n                    hs.properties.dx = dataItem.column.pixelWidth;\n                    bullet.isHover = true;\n\n                    previousBullet = bullet;\n                }\n            }\n        })\n\n\n    }\n}\n\nexport default withRouter(ElectionTally);","import React from 'react'\nimport './Status.css'\nimport { AppUtil } from './App'\nexport default class Status extends React.Component{\n    constructor(){\n        super()\n\n        this.messages = []\n\n        AppUtil.statusBox = this\n\n    }\n\n    render(){\n        return(<div className=\"status-box absolute w-full max-w-5xl\">\n                {this.messages.map((msg)=>{\n                    setTimeout(()=>{\n                        this.close(msg)\n                    }, 2000)\n\n                    return <div className={msg.class + \" h-10\"}>\n                        {msg.message}\n                        <i className=\"fas fa-window-close float-right mr-2 mt-2\" onClick={()=>{this.close(msg)}}></i>\n                    </div>\n                })}\n            </div>)\n    }\n\n    close(msg){\n        let idx = this.messages.findIndex((m)=>msg==m)\n        \n\n        if(idx > -1){\n            this.messages.splice(idx,1)\n            this.setState({})\n        }\n    }\n\n    addMessage(msg){\n        this.messages.push(msg)\n        this.setState({})\n    }\n\n}\n","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport Home from \"./Home\";\nimport About from \"./About\";\nimport ElectionBallot from \"./ElectionBallot\";\nimport DecryptVote from \"./DecryptVote\";\nimport './App.css'\nimport Elections from \"./Elections\";\nimport Candidates from \"./Candidates\";\nimport ElectionForm from \"./ElectionForm\";\nimport CandidateForm from \"./CandidateForm\";\nimport VoterForm from \"./VoterForm\";\nimport ElectionTally from \"./ElectionTally\";\nimport Status from \"./Status\";\n\n\n/*\nMENU / ROUTER MAPPING\n*/\nconst router_config = [\n  {name: \"Home\", path: \"/\", component: Home, is_menu: true},\n  {name: \"About\", path: \"/about\", component: About, is_menu: true},\n  {name: \"Ballot\", path: \"/ballot\", component: ElectionBallot},\n  {name: \"Decrypt\", path: \"/decrypt\", component: DecryptVote},\n  {name: \"Elections\", path: \"/elections\", component: Elections, is_menu:true},\n  {name: \"Candidates\", path: \"/candidates\", component: Candidates},\n  {name: \"Candidate Form\", path: \"/candidate-form\", component: CandidateForm},\n  {name: \"Election Form\", path: \"/election-form\", component: ElectionForm},\n  {name: \"Register Voter\", path: \"/voter-form\", component: VoterForm},\n  {name: \"Election Tally\", path: \"/election-tally\", component: ElectionTally}\n]\n\n\n/*\n  APPLICATION\n\n*/\nexport default function App() {\n  return (\n    <Router>\n        <nav className=\"sticky top-0 z-40 flex flex-wrap items-center justify-between px-2 bg-blueGray-500 rounded border-2 border-green-200\">\n          <div className=\"w-full relative flex justify-between lg:w-auto px-4 lg:static lg:block lg:justify-start\">\n            <a className=\"text-sm font-bold leading-relaxed inline-block mr-4 py-2 whitespace-nowrap uppercase text-white\" href={process.env.PUBLIC_URL}>\n              <img className=\"rounded-lg md:w-56\" \n                src={`${process.env.PUBLIC_URL}/assets/images/logo.png`} \n                alt=\"logo\"/>\n            </a>\n            <button className=\"cursor-pointer text-xl leading-none px-3 py-1 border border-solid border-transparent rounded bg-transparent block lg:hidden outline-none focus:outline-none\" type=\"button\">\n              <span className=\"block relative w-6 h-px rounded-sm bg-white\"></span>\n              <span className=\"block relative w-6 h-px rounded-sm bg-white mt-1\"></span>\n              <span className=\"block relative w-6 h-px rounded-sm bg-white mt-1\"></span>\n            </button>\n          </div>\n          <div className=\"flex lg:flex-grow items-center\">\n            <ul className=\"flex flex-col lg:flex-row list-none ml-auto\">\n              {router_config.map((item, i)=>{\n                  if(item.is_menu){\n                    return(<li className=\"nav-item\">\n                        <Link className=\"px-3 py-2 flex items-center text-xs uppercase font-bold leading-snug hover:opacity-75\" to={item.path}>{item.name}</Link>\n                    </li>)\n                  }\n                  \n              })}\n            </ul>\n            <div className=\"text-center w-12\">\n              <img src={`${process.env.PUBLIC_URL}/assets/images/liberty.png`} />\n              {0} LBT\n            </div>\n          </div>\n        </nav>\n\n        <Status></Status>\n        \n        <Switch>\n            {router_config.map((item)=>{\n                return (<Route exact path={item.path}>\n                    <div className=\"px-5 pb-0\">\n                      {React.createElement(item.component)}\n                    </div>\n                </Route>)\n            })}\n\n        </Switch>\n        \n    </Router>\n\n  );\n}\n\nexport class AppUtil{\n  \n  static stopLoading(){\n    document.getElementById('loader').classList.add('invisible')\n    if(window.loaderInterval){\n      window.clearInterval(window.loaderInterval);\n      window.loaderInterval = null\n    }\n  }\n\n  static startLoading(){\n    document.getElementById('loader').classList.remove('invisible')\n\n    let loaderImage = document.getElementById('loader-image')\n    let loaderAngle = 0;\n    if(window.loaderInterval){\n      window.clearInterval(window.loaderInterval);\n      window.loaderInterval = null\n    }\n    window.loaderInterval = window.setInterval(()=>{\n        loaderAngle +=5\n        loaderImage.style.transform = \"rotate3d(0,1,0, \"+loaderAngle+\"deg)\"\n    }, 80)\n\n  }\n\n  static ipfsUrl(cid){\n    let config = require('./config.json')\n    if(cid){\n      return config.ipfs.endpoint + cid\n    }\n\n    return process.env.PUBLIC_URL+ \"/assets/images/image_not_available.png\"\n\n\n  }\n\n  static setStatusBox(status){\n        AppUtil.statusBox = status\n  }\n\n  static error(msg){\n    AppUtil.statusBox.addMessage({message: msg, class: 'error'})\n\n  }\n\n  static info(msg){\n    AppUtil.statusBox.addMessage({message: msg, class: 'info'})\n\n  }\n\n  static warn(msg){\n    AppUtil.statusBox.addMessage({message: msg, class: 'warn'})\n  }\n}\n\n\n","const sigUtil = require('eth-sig-util')\nconst ethUtil = require('ethereumjs-util')\n\n\nexport default class WalletUtil{\n    // constructor(){\n\n    // }\n\n    static getPublicKey(){\n      return new Promise((r)=>{\n        window.ethereum.request({\n          method: 'eth_getEncryptionPublicKey',\n          params: [window.ethereum.selectedAddress], // you must have access to the specified account\n        }).then((x)=>r(x))\n      })\n        \n    }\n\n    static encrypt(msg, encryptionPublicKey){\n      const encryptedMessage = ethUtil.bufferToHex(\n        Buffer.from(\n          JSON.stringify(\n            sigUtil.encrypt(\n              encryptionPublicKey,\n              { data: msg },\n              'x25519-xsalsa20-poly1305'\n            )\n          ),\n          'utf8'\n        )\n      );\n\n      return encryptedMessage;\n    }\n\n    /*\n      TODO: Decrypt multiple messages simultaneously\n    */\n   static decrypt(encrypted_msg){\n      return window.ethereum\n      .request({\n        method: 'eth_decrypt',\n        params: [encrypted_msg, window.ethereum.selectedAddress],\n      })\n    }\n}\n","import BaseContract from './BaseContract'\nexport default class ElectionContract extends BaseContract{\n    constructor(){\n        super()\n        this.contract = new window.web3.eth.Contract(this.config.election.abi_interface, this.config.election.address);\n    }\n\n    create(election){\n        return this.contract.methods.createElection(election).send({from: window.ethereum.selectedAddress, gas: 5000000})\n    }\n\n    read(election_id){\n        return this.contract.methods.readElection(election_id).send({from: window.ethereum.selectedAddress, gas: 5000000})\n    }\n\n    delete(election_id){\n        return this.contract.methods.deleteElection(election_id).send({from: window.ethereum.selectedAddress, gas: 5000000})\n    }\n\n    list(){\n        return this.contract.methods.listElections().call()\n    }\n\n    listIds(){\n        return this.contract.methods.listElectionIds().call()\n    }\n\n    endCandidate(election_id){\n        return this.contract.methods.endCandidate(election_id).send({from: window.ethereum.selectedAddress, gas: 5000000})\n    }\n    endRegistration(election_id){\n        return this.contract.methods.endRegistration(election_id).send({from: window.ethereum.selectedAddress, gas: 5000000})\n\n    }\n    endVoting(election_id){\n        return this.contract.methods.endVoting(election_id).send({from: window.ethereum.selectedAddress, gas: 5000000})\n    }\n\n    endTally(election_id){\n        return this.contract.methods.endTally(election_id).send({from: window.ethereum.selectedAddress, gas: 5000000})\n    }\n}\n\nexport class Election{\n    constructor(id, name, phase=\"Candidate\", election_candidate_id=\"\", image_cid){\n        this.id = id\n        this.name = name\n        this.phase = phase\n        this.elected_candidate_id = election_candidate_id\n        this.image_cid = image_cid\n    }\n}\n","import BaseContract from './BaseContract';\n\nexport class VotingBoothContract extends BaseContract{\n\n    constructor(){\n        super()\n        this.contract = new window.web3.eth.Contract(this.config.voting_booth.abi_interface, this.config.voting_booth.address);\n    }\n\n\n    submitEncryptedMessages(election_id, messages){\n        if(messages.length == 0){\n            return Promise.resolve()\n        }\n        return this.contract.methods.submitEncryptedMessages(election_id, messages ).send({from: window.ethereum.selectedAddress, gas: 5000000});\n    }\n\n    getEncryptedMessages(election_id){\n        return this.contract.methods.getEncryptedMessages(election_id).call({from: window.ethereum.selectedAddress});\n    }\n\n    clearEncryptedMessages(election_id){\n        return this.contract.methods.clearEncryptedMessages(election_id).send({from: window.ethereum.selectedAddress, gas: 1000000})\n    }\n\n\n}\n\nexport class EncryptedMessage{\n    constructor( message, blockchain_address){\n        this.blockchain_address = blockchain_address\n        this.message = message\n    }\n}","import BaseContract from './BaseContract';\n\nexport default class ElectionCandidateContract extends BaseContract{\n    contract = null\n\n    constructor(){\n        super()\n        this.contract = new window.web3.eth.Contract(this.config.election_candidate.abi_interface, this.config.election_candidate.address);\n    }\n\n    createCandidate(election_id, candidate){\n        return this.contract.methods.createCandidate(election_id, candidate ).send({from: window.ethereum.selectedAddress, gas: 1000000});\n    }\n\n\n    updateCandidate(election_id, candidate){\n        return this.contract.methods.updateCandidate(election_id, candidate ).send({from: window.ethereum.selectedAddress, gas: 1000000});\n    }\n\n\n    readCandidate(election_id, candidate_id){\n        return this.contract.methods.readCandidate(election_id, candidate_id ).call();\n    }\n\n\n    deleteCandidate(election_id, candidate_id){\n        return this.contract.methods.deleteCandidate(election_id, candidate_id ).send({from: window.ethereum.selectedAddress, gas: 1000000});\n    }\n\n    list(election_id){\n        return this.contract.methods.listCandidates(election_id).call().then((candidates)=>{\n            return Promise.resolve(candidates.map((c)=>new ElectionCandidate(...c)))\n        });\n    }\n    listIds(election_id){\n        return this.contract.methods.listCandidateIds(election_id).call();\n    }\n\n}\n\nexport class ElectionCandidate{\n\n    constructor( id, name,  election_id, key, profile_image_hash, profile_image_url){\n        this.id = id;\n        this.name = name;\n        this.election_id = election_id;\n        this.key = key;\n        this.profile_image_hash = profile_image_hash;\n        this.profile_image_url = profile_image_url\n    }\n}\n\n\n\n","import BaseContract from './BaseContract';\n\nexport class VoterRegistrationContract extends BaseContract{\n\n    constructor(){\n        super()\n        this.contract = new window.web3.eth.Contract(this.config.voter_registration.abi_interface, this.config.voter_registration.address);\n    }\n\n\n    register(election_id, voter){\n        return this.contract.methods.registerVoter(election_id, voter).send({from: window.ethereum.selectedAddress, gas: 5000000});\n    }\n\n    getTurnout(election_id){\n        return this.contract.methods.getTurnout(election_id).call()\n    }\n\n\n}\n\nexport class Voter{\n    constructor(reg_num, blockchain_address, nin, voted,){\n        this.id = reg_num \n        this.blockchain_address = blockchain_address\n        this.nin = nin\n        this.voted = voted\n    }\n}","import React from 'react'\nimport GeneralUtil from './util/general-util'\nimport WalletUtil from './util/wallet-util'\nimport { EncryptedMessage } from './contract/VotingBoothContract'\nimport { withRouter } from 'react-router-dom'\nimport { AppUtil } from './App'\nconst uint8ArrayFromString = require('uint8arrays/from-string')\n\nexport class ElectionBallot extends React.Component {\n    constructor(props){\n        super(props)\n\n\n        let decryptor1 = {\n            public_key: 'cQzV150MGQ46Z+KR3KCcHE0NwGFoq6uddA955b9GiEo=',\n            blockchain_address: '0xb4875b7EFf02Cc2A9a5697AD4dCE8aDD43e54e90'\n        }\n        let decryptor2 = {\n            public_key: 'cQzV150MGQ46Z+KR3KCcHE0NwGFoq6uddA955b9GiEo=',\n            blockchain_address: '0xb4875b7EFf02Cc2A9a5697AD4dCE8aDD43e54e90'\n        }\n\n        this.state = {\n            candidates: props.location.state.candidates,\n            decryptors:[\n                decryptor1,\n                decryptor2\n                \n                \n            ],\n            decryptors2:[\n                decryptor2,\n                decryptor1\n                \n            ],\n        }\n        this.election = props.location.state.election\n    }\n\n\n    render(){\n        return (\n            \n            <div className=\"ballot\">\n                <h1 className=\"text-2xl\">Ballot</h1>\n                {this.state.candidates.map((candidate)=>{\n                    return <div className=\" w-full lg:max-w-full lg:flex\" >\n                        <div className=\"h-48 lg:h-auto lg:w-48 flex-none bg-cover border-2 border-green-400 rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden\" style={{\"background-image\": \"url('\" + AppUtil.ipfsUrl(candidate.profile_image_hash) + \"')\"}} title=\"Mountain\">\n                        </div>\n                        <div className=\"w-full border-r border-b border-l border-gray-400 lg:border-l-0 lg:border-t lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal\" onClick={()=>this.vote(candidate)}>\n                            <div className=\"mb-8\">\n                                <p className=\"text-sm text-gray-600 flex items-center\">\n                                </p>\n                                <div className=\"text-gray-900 font-bold text-xl mb-2\">{candidate.name}</div>\n                            </div>\n                            \n                        </div>\n                    </div>\n                    \n                })}\n            </div>\n        )       \n    }\n\n    toHexString(byteArray) {\n        return Array.from(byteArray, function(byte) {\n            return ('0' + (byte & 0xFF).toString(16)).slice(-2);\n        }).join('')\n    }\n\n    vote(candidate){\n        AppUtil.startLoading()\n        let vote = {\n            id: GeneralUtil.uuidv4(),\n            candidate_key: candidate.key\n        }\n\n        let n_decryptors = this.state.decryptors.length\n        let candidate_key = candidate.key\n\n        let encrypted_msgs = [] //stores the encrypted message instances that will be stored on the blockchain\n        \n        let promises = []\n        \n        let encryptions_1 = []\n        \n        //Explode voter's candidate key for obfuscation of full vote\n        for(let i=0;i<candidate_key.length;i++){\n\n\n            let decryptor = this.state.decryptors[i%n_decryptors];\n            let pubkey = decryptor.public_key\n            let fragment = {\n                vote_id: vote.id,\n                candidate_key_fragment: candidate_key[i],\n                candidate_key_fragment_position: i,\n                election_id: this.election.id\n\n            }\n            \n            encryptions_1.push(WalletUtil.encrypt(JSON.stringify(fragment), Buffer.from(pubkey)))\n\n            \n        }\n\n        let store_encryptions = async ()=>{\n            let results = await window.ipfs.add(encryptions_1)\n            let encryptions_2 = []\n            let i = 0\n            for await (let r of results){\n\n                \n                let decryptor = this.state.decryptors[i%n_decryptors];\n\n                console.log(\"shooting file\")\n\n                \n                let encryption1_cid = r.path\n                let msg = {\n                    blockchain_address: decryptor.blockchain_address,\n                    message: encryption1_cid\n                }\n\n                let decryptor2 = this.state.decryptors2[i%n_decryptors];\n                let pubkey2 = decryptor2.public_key\n                \n                encryptions_2.push(WalletUtil.encrypt(JSON.stringify(msg), pubkey2))\n\n                \n                    \n                \n\n    \n\n                i = i+1\n            }    \n\n            let results2 = await window.ipfs.add(encryptions_2)\n            i=0\n            for await (const r2 of results2){\n                let decryptor2 = this.state.decryptors2[i%n_decryptors];\n\n                promises.push(new Promise(async (resolv, reject)=>{             \n                    let encrypted2_cid =  r2.path\n                    let msg2 = new EncryptedMessage(encrypted2_cid,decryptor2.blockchain_address)\n        \n                    encrypted_msgs.push(msg2)\n                    resolv()    \n                }))\n                i = i+1\n            }\n            \n        }\n\n        store_encryptions().then(()=>{\n\n            console.log(\"Before promises\")\n            Promise.all(promises).then(()=>{\n                window.contract.voting_booth.submitEncryptedMessages(this.election.id, encrypted_msgs).then(()=>{\n                    AppUtil.error(\"Successfully cast vote\")\n                    AppUtil.stopLoading()\n                }, ()=>{\n                    AppUtil.error(\"Failed to cast vote\")\n                    AppUtil.stopLoading()\n                })\n                console.log(\"after promises\")\n                \n            })\n\n        })\n    \n        \n        \n    }\n}\n\nexport default withRouter(ElectionBallot);","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import BaseContract from './BaseContract'\nexport default class ElectionTallyContract extends BaseContract{\n    constructor(){\n        super()\n        this.contract = new window.web3.eth.Contract(this.config.election_tally.abi_interface, this.config.election_tally.address);\n    }\n\n    submitVoteFragments(election_id, vote_fragments){\n\n        if(vote_fragments.length == 0){\n            return Promise.resolve()\n        }\n        return this.contract.methods.submitVoteFragments(election_id, vote_fragments).send({from: window.ethereum.selectedAddress, gas: 5000000})\n    }\n\n    getTally(election_id){\n        return this.contract.methods.getTally(election_id).call()\n    }\n}\n\nexport class VoteFragment{\n    constructor(vid, position, fragment){\n        this.election_id=\"\"\n        this.vote_id = vid\n        this.candidate_key_fragment_position = position\n        this.candidate_key_fragment = fragment\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport Web3 from 'web3';\nimport {\n  VotingBoothContract, \n  // EncryptedMessage\n} from './contract/VotingBoothContract'\nimport ElectionContract from './contract/ElectionContract';\nimport  ElectionCandidateContract  from './contract/ElectionCandidateContract';\nimport { VoterRegistrationContract } from './contract/VoterRegistrationContract';\nimport ElectionTallyContract from './contract/ElectionTallyContract';\n\nconst config = require('./config.json')\nconst ipfsClient = require('ipfs-http-client');\n\nasync function loadWeb3() {\n  if (window.ethereum) {\n      await window.ethereum.enable();\n      window.web3 = new Web3(window.ethereum);\n    \n  }\n}\n\nloadWeb3().then(()=>{\n  \n\n\n  window.contract = {\n    election: new ElectionContract(),\n    election_candidate: new ElectionCandidateContract(),\n    voting_booth: new VotingBoothContract(),\n    election_tally: new ElectionTallyContract(),\n    voter: new VoterRegistrationContract(),\n  }\n\n\n\n  window.ipfs = ipfsClient({host: config.ipfs.host, port: config.ipfs.port, protocol: config.ipfs.protocol})\n\n  //let y = new ElectionCandidate(\"Tjad\",\"id1\",\"tjkey\",\"MyElection\",\"imagehash\",\"imageurl\")\n\n  //window.contract.election_candidate.createCandidate(\"MyElection\", y);\n\n  \n  // WalletUtil.getPublicKey().then((key)=>{\n  //   alert(key)\n  //   let encrypted_msg = WalletUtil.encrypt(\"Hello world!\", key)\n  //   alert(encrypted_msg);\n\n  //   WalletUtil.decrypt(encrypted_msg).then((x)=>{\n  //     alert(x)\n  //   })\n\n  // })\n\n\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n  \n  \n})\n\n\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}