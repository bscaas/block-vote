(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{111:function(e,t,n){"use strict";n.d(t,"b",(function(){return G})),n.d(t,"a",(function(){return X}));var a=n(20),i=n(24),r=n(28),s=n(29),o=n(26),c=n.n(o),l=n(97),d=n(56),u=n(9),p=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.call(this)}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("section",{className:"h-screen flex items-center justify-center border-b-2 border-green-400",children:[Object(u.jsx)("div",{className:"absolute opacity-50 h-full w-full",style:{background:"no-repeat center top url('/block-vote/assets/images/fist.jpg"}}),Object(u.jsx)("h2",{className:"uppercase tracking-wide text-3xl text-green-600 font-bold",children:"Election voting on the blockchain"}),Object(u.jsx)("p",{className:"mt-1 text-gray-500",children:"A solution that works!"})]}),Object(u.jsxs)("section",{className:"h-screen bg-opacity-50 flex items-center justify-center border-b-2 border-green-400",children:[Object(u.jsx)("img",{className:"rounded-lg md:w-56",src:"".concat("/block-vote","/assets/images/puzzle.png"),alt:"Missing piece"}),Object(u.jsx)("h2",{class:"uppercase tracking-wide text-lg text-green-600 font-bold",children:"The stumbling Block"}),Object(u.jsx)("p",{class:"mt-1 text-gray-500",children:"The African electoral systems are plagued with malpractise, violence and general apathy on the part of citizens.Not only that, there is also the issue of huge costs required to fund the process. The concept of democracy has therefore not been able to fulfill its purpose. "})]}),Object(u.jsxs)("section",{className:"h-screen bg-opacity-50 flex items-center justify-center border-b-2 border-green-400",children:[Object(u.jsx)("h2",{class:"uppercase tracking-wide text-lg text-green-600 font-bold",children:"Our solution"}),Object(u.jsx)("p",{class:"mt-1 text-gray-500",children:'A full on-chain voting system using "Cascade Encrypted Obfuscation" (CEO) technique that inherits the decentralized and auditable features of the blockchain. Voting would become digital immutable and transparent.'}),Object(u.jsx)("img",{className:"rounded-lg md:w-56",src:"".concat("/block-vote","/assets/images/blockchain.png"),alt:"Blockchain"})]}),Object(u.jsxs)("section",{className:"h-screen bg-opacity-50 flex items-center justify-center mb-0",children:[Object(u.jsx)("img",{className:"rounded-lg md:w-56",src:"".concat("/block-vote","/assets/images/earn_rewards.png"),alt:"logo"}),Object(u.jsx)("h2",{class:"uppercase tracking-wide text-lg text-green-600 font-bold",children:"Earn Rewards"}),Object(u.jsx)("p",{class:"mt-1 text-gray-500",children:"Get rewarded for being an active citizen! Earn our Liberty Token (LBT) as you complete the registration cycle and vote for your desired candidate. Participation in government has never been better!"})]})]})}}]),n}(c.a.Component),y=(n(425),function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.call(this)}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{class:"mt-4 md:mt-0 md:ml-6",children:[Object(u.jsx)("section",{id:"about1",className:"h-screen bg-opacity-50 flex items-center justify-center mb-0  bg-auto bg-no-repeat bg-center",style:{background:"url('/block-vote/assets/images/multiethnic-group-hands-raised.jpg"}}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{class:"block mt-1 text-lg leading-tight font-semibold text-gray-900 hover:underline",children:"BlockVote | Everything You Need To Know!"}),Object(u.jsx)("p",{children:"This Application is for election & polling at any scale. Fortified with encrytion obfusication in order to obscure the voters from thier vote making it nearly imposible to see which candidate a voter voted."}),Object(u.jsx)("p",{children:"These application has an inbuilt reward system to incentivise the voters. Electorial processes can be overwhelming most of the time and as sign of good fate its only natural to want to support the people for thier cooperation."}),Object(u.jsx)("p",{children:"The more processes you complete the more you earn, this way everyone will be willing to participate. Everyone must pre-register to vote prior to election."}),Object(u.jsx)("p",{children:"Though the infomation on the block chain is public, the identities of the voters cannot be easily figured out."})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{}),Object(u.jsx)("h2",{class:"block mt-1 text-lg leading-tight font-semibold text-gray-900 hover:underline",children:"How To Vote"}),Object(u.jsx)("p",{children:"Every voter must go to the registration portal and register to vote."})]})]})}}]),n}(c.a.Component)),f=n(409),b=n(167),m=n(142),h=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;if(Object(a.a)(this,n),(i=t.call(this,e)).messages=[],e.location.state){i.election_id=e.location.state.election_id,i.already_decrypted_messages=JSON.parse(localStorage.getItem("decrypt"+i.election_id))||[];var r,s=Object(b.a)(e.location.state.messages);try{for(s.s();!(r=s.n()).done;){var o=r.value;i.already_decrypted_messages.includes(window.web3.utils.keccak256(o).toString())||i.messages.push(o)}}catch(c){s.e(c)}finally{s.f()}}return i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{children:[this.messages.length," messages to decrypt.",Object(u.jsx)("br",{}),Object(u.jsx)("button",{onClick:function(){return e.decrypt()},children:"Decrypt"})]})}},{key:"decrypt",value:function(){var e=this,t=[],n=[];Promise.all(this.messages.map((function(e){return new Promise((function(a){fetch("https://ipfs.infura.io/ipfs/"+e).then((function(e){e.text().then((function(e){m.a.decrypt(e).then((function(e){var i=JSON.parse(e);i.vote_id?n.push(i):t.push(i),a()}))}))}))}))}))).then((function(){Promise.all([window.contract.voting_booth.submitEncryptedMessages(e.election_id,t),window.contract.election_tally.submitVoteFragments(e.election_id,n)]).then((function(){e.already_decrypted_messages=e.already_decrypted_messages.concat(e.messages.map((function(e){return window.web3.utils.keccak256(e).toString()}))),localStorage.setItem("decrypt"+e.election_id,JSON.stringify(e.already_decrypted_messages)),X.info("Successfully decrypted "+e.messages.length+" messages.")}))}))}}]),n}(c.a.Component),g=Object(d.f)(h),v=(n(512),n(228)),j=n(169),w=n(92),x=n(188),O=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).editElection=function(t){e.props.history.push("/election-form",{election:t})},e.fund=function(e,t){t.stopPropagation(),X.startLoading(),window.contract.liberty_token.fund(e.id,5e7).then((function(){X.info("Thank you for funding the election"),X.stopLoading()}))},e.electionResults=function(t,n){return n.stopPropagation(),e.props.history.push("/election-tally",{election:t}),!1},e.elections=[],X.startLoading(),window.contract.election.list().then((function(t){e.elections=t.map((function(e){return Object(v.a)(x.a,Object(j.a)(e))})),e.setState({});var n,a=[],i=Object(b.a)(e.elections);try{var r=function(){var e=n.value;a.push(window.contract.reward_bearer.totalFunds(e.id).then((function(t){e.funding=t}))),a.push(window.contract.reward_bearer.fundsRewarded(e.id).then((function(t){e.funds_rewarded=t}))),a.push(window.contract.voter.getTurnout(e.id).then((function(t){e.voter_count=t})))};for(i.s();!(n=i.n()).done;)r()}catch(s){i.e(s)}finally{i.f()}Promise.all(a).then((function(){e.setState({})})),X.stopLoading()})),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{className:"elections",children:[Object(u.jsxs)("h1",{className:"mt-5 text-2xl",children:["Elections",Object(u.jsx)("i",{className:"fas fa-plus-circle float-right",onClick:function(){e.editElection(new x.a("",""))}})]}),this.elections.map((function(t){return Object(u.jsxs)("div",{className:" w-full lg:max-w-full lg:flex",children:[Object(u.jsx)("div",{className:"h-48 lg:h-auto lg:w-48 flex-none bg-cover border-2 border-green-400 rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden",style:{"background-image":"url('"+X.ipfsUrl(t.image_cid)+"')"},title:"Mountain"}),Object(u.jsxs)("div",{className:"w-full border-r border-b border-l border-gray-400 lg:border-l-0 lg:border-t lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal",onClick:function(){e.editElection(t)},children:[Object(u.jsxs)("div",{className:"mb-8",children:[Object(u.jsxs)("p",{className:"text-sm text-gray-600 flex items-center",children:[Object(u.jsx)("img",{className:"w-6",src:"".concat("/block-vote","/assets/images/liberty.png")}),t.funding/1e4," LBTY FUNDED",Object(u.jsx)("img",{className:"ml-4 w-6",src:"".concat("/block-vote","/assets/images/liberty.png")}),t.funds_rewarded/1e4," LBTY REWARDED"]}),Object(u.jsx)("div",{className:"text-gray-900 font-bold text-xl mb-2",children:t.name}),Object(u.jsxs)("p",{className:"text-gray-700 text-base",children:[t.voter_count," Registered Voters"]}),Object(u.jsxs)("p",{className:"text-gray-700 text-base",children:[t.candidate_count||0," Registered Candidates"]})]}),Object(u.jsxs)("div",{className:"flex items-center",children:[Object(u.jsxs)("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full",children:["Phase: ",t.phase]}),Object(u.jsxs)("span",{className:"ml-auto order-2",children:[Object(u.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full mr-2",onClick:function(n){return e.fund(t,n)},children:"Fund"}),"Candidate"==t.phase?Object(u.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:function(n){return e.endCandidate(t.id,n)},children:"End Candidate Registration"}):"Registration"==t.phase?Object(u.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:function(n){return e.endRegistration(t.id,n)},children:"End Voter Registration"}):"Voting"==t.phase?Object(u.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full right-0",onClick:function(n){return e.endVoting(t.id,n)},children:"End Voting"}):"Tally"==t.phase?Object(u.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:function(n){return e.endTally(t.id,n)},children:"End Tally"}):Object(u.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:function(n){return e.electionResults(t,n)},children:"Election Results"})]})]})]})]})}))]})}},{key:"endCandidate",value:function(e,t){var n=this;return t.stopPropagation(),X.startLoading(),window.contract.election.endCandidate(e).finally((function(){n.elections.find((function(t){return t.id==e})).phase="Registration",n.setState({}),X.info("Candidate Registration ended. Now in Voter Registration."),X.stopLoading()})),!1}},{key:"endRegistration",value:function(e,t){var n=this;return t.stopPropagation(),X.startLoading(),window.contract.election.endRegistration(e).finally((function(){n.elections.find((function(t){return t.id==e})).phase="Voting",n.setState({}),X.info("Voter Registration ended. Now in Voting."),X.stopLoading()})),!1}},{key:"endVoting",value:function(e,t){var n=this;return t.stopPropagation(),X.startLoading(),window.contract.election.endVoting(e).finally((function(){n.elections.find((function(t){return t.id==e})).phase="Tally",n.setState({}),X.info("Voting ended. Now in Tallying."),X.stopLoading()})),!1}},{key:"endTally",value:function(e,t){var n=this;return t.stopPropagation(),X.startLoading(),window.contract.election.endTally(e).finally((function(){n.elections.find((function(t){return t.id==e})).phase="Ended",n.setState({}),X.info("Tallying ended. The election has ended"),X.stopLoading()})),!1}}]),n}(c.a.Component),_=Object(d.f)(O),k=n(229),T=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this)).election_id=e.election_id,i.can_register=e.can_register,i.candidates=e.candidates,i}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{className:"candidates",children:[this.can_register?Object(u.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:function(){e.editCandidate(new k.a("","",e.election_id,"","",""))},children:"Create"}):"",this.candidates.map((function(t){return Object(u.jsxs)("div",{className:" w-full lg:max-w-full lg:flex",children:[Object(u.jsx)("div",{className:"h-32 lg:w-32 flex-none bg-cover border-2 border-green-400 rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden",style:{"background-image":"url('"+X.ipfsUrl(t.profile_image_hash)+"')"},title:"Mountain"}),Object(u.jsx)("div",{className:"w-full border-r border-b border-l border-gray-400 lg:border-l-0 lg:border-t lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal",onClick:function(){e.editCandidate(t)},children:Object(u.jsxs)("div",{className:"mb-8",children:[Object(u.jsx)("p",{className:"text-sm text-gray-600 flex items-center"}),Object(u.jsx)("div",{className:"text-gray-900 font-bold text-xl mb-2",children:t.name})]})})]})}))]})}},{key:"editCandidate",value:function(e){this.props.history.push("/candidate-form",{candidate:e})}}]),n}(c.a.Component),C=Object(d.f)(T),N=n(230),E=n(16),M=n.n(E),R=n(141),A=n(186),B=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).handleChange=function(t){e.selected_file=t.target.files[0],e.setState({})},e.upload=Object(R.a)(M.a.mark((function t(){var n,a,i,r,s,o,c,l,d;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(X.startLoading(),!e.selected_file){t.next=44;break}return t.next=4,e.selected_file.arrayBuffer();case 4:return n=t.sent,t.next=7,window.ipfs.add(n);case 7:a=t.sent,i=!0,r=!1,t.prev=10,o=Object(A.a)(a);case 12:return t.next=14,o.next();case 14:return c=t.sent,i=c.done,t.next=18,c.value;case 18:if(l=t.sent,i){t.next=25;break}d=l,e.cid=d.path;case 22:i=!0,t.next=12;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t.catch(10),r=!0,s=t.t0;case 31:if(t.prev=31,t.prev=32,i||null==o.return){t.next=36;break}return t.next=36,o.return();case 36:if(t.prev=36,!r){t.next=39;break}throw s;case 39:return t.finish(36);case 40:return t.finish(31);case 41:X.info("File upload successful."),t.next=45;break;case 44:X.error("Select a file before uploading.");case 45:X.stopLoading();case 46:case"end":return t.stop()}}),t,null,[[10,27,31,41],[32,,36,40]])}))),e}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("span",{children:[Object(u.jsx)("input",{type:"file",onChange:this.handleChange}),Object(u.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:this.upload,children:"Upload"})]})}}]),n}(c.a.Component),F=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this)).createElection=function(){X.startLoading(),i.election.id=w.a.uuidv4(),i.election.image_cid=i.ipfs_upload.current.cid,window.contract.election.create(i.election).then((function(){i.setState({}),X.info(i.election.name+" has been created with id "+i.election.id),X.stopLoading()}),(function(){X.error("Failed to create election."),X.stopLoading()}))},i.updateElection=function(){X.info(i.election.name+" has been updated (Coming soon!)")},i.handleChangeName=function(e){i.election.name=e.target.value,i.setState({})},i.gotoBallot=function(){i.props.history.push("/ballot",{election:i.election,candidates:i.candidates})},i.gotoDecrypt=function(){window.contract.voting_booth.getEncryptedMessages(i.election.id).then((function(e){i.props.history.push("/decrypt",{messages:e,election_id:i.election.id})}))},i.gotoRegistration=function(){i.props.history.push("/voter-form",{election:i.election,voter:new N.a(0,"","",!1)})},i.candidates=[],i.election=e.location.state.election,i.ipfs_upload=c.a.createRef(),i.election.id&&(X.startLoading(),window.contract.election_candidate.list(i.election.id).then((function(e){var t;i.candidates.length=0,(t=i.candidates).push.apply(t,Object(j.a)(e)),i.setState({}),X.stopLoading()}))),i}return Object(i.a)(n,[{key:"render",value:function(){var e;e=this.election.id?Object(u.jsx)("button",{className:"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:this.updateElection,children:"Update"}):Object(u.jsx)("button",{className:"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:this.createElection,children:"Create"});var t="";return"Registration"==this.election.phase?t=Object(u.jsx)("button",{className:"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:this.gotoRegistration,children:"Register to Vote"}):"Voting"==this.election.phase&&(t=Object(u.jsxs)("span",{className:"float-right",children:[Object(u.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:this.gotoBallot,children:"Vote"}),Object(u.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:this.gotoDecrypt,children:"Decrypt"})]})),Object(u.jsxs)("div",{className:"election mb-10 mt-10",children:[Object(u.jsx)("h3",{className:"text-2xl",children:"Election"})," ",t,Object(u.jsx)("label",{children:"Name: "}),Object(u.jsx)("input",{type:"text",value:this.election.name,onChange:this.handleChangeName}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"Banner:"}),Object(u.jsx)(B,{ref:this.ipfs_upload}),e,Object(u.jsx)("h3",{className:"text-xl",children:"Candidates"}),this.election.id?Object(u.jsx)(C,{election_id:this.election.id,can_register:"Candidate"==this.election.phase,candidates:this.candidates}):""]})}}]),n}(c.a.Component),V=Object(d.f)(F),S=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this)).createCandidate=function(){X.startLoading(),i.candidate.id=w.a.uuidv4(),i.candidate.key=w.a.clashid(),i.candidate.profile_image_hash=i.ipfs_upload.current.cid,window.contract.election_candidate.createCandidate(i.candidate.election_id,i.candidate).then((function(){i.setState({}),X.info("Successfully created candidate."),X.stopLoading()}),(function(){X.info("Failed to create candidate."),X.stopLoading()}))},i.updateCandidate=function(){X.info(i.candidate.name+" has been updated (Coming soon!)")},i.handleChangeName=function(e){i.candidate.name=e.target.value,i.setState({})},i.candidate=e.location.state.candidate,i.ipfs_upload=c.a.createRef(),i}return Object(i.a)(n,[{key:"render",value:function(){var e;return e=this.candidate.id?Object(u.jsx)("button",{className:"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:this.updateCandidate,children:"Update"}):Object(u.jsx)("button",{className:"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:this.createCandidate,children:"Create"}),Object(u.jsxs)("div",{className:"candidate mt-10 mb-10",children:[Object(u.jsx)("h2",{className:"text-2xl",children:"Candidate"}),Object(u.jsx)("label",{children:"Name: "}),Object(u.jsx)("input",{type:"text",value:this.candidate.name,onChange:this.handleChangeName}),Object(u.jsx)("br",{}),Object(u.jsx)(B,{ref:this.ipfs_upload}),e]})}}]),n}(c.a.Component),L=Object(d.f)(S),I=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this)).registerVoter=function(){X.startLoading(),i.voter.id=0,i.voter.blockchain_address=window.ethereum.selectedAddress,i.voter.public_key=m.a.getPublicKey().then((function(e){i.voter.public_key=e,window.contract.voter.register(i.election_id,i.voter).then((function(){i.setState({}),X.info(i.voter.nin+" has been registered with id "+i.voter.id),X.stopLoading()}),(function(){X.error("Failed to register to vote."),X.stopLoading()}))}))},i.handleChangeNIN=function(e){i.voter.nin=e.target.value,i.setState({})},i.voter=e.location.state.voter,i.election_id=e.location.state.election.id,i}return Object(i.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"voter mb-10 mt-10",children:[Object(u.jsx)("label",{children:"National Identity Number: "}),Object(u.jsx)("input",{type:"text",value:this.voter.name,onChange:this.handleChangeNIN}),Object(u.jsx)("button",{className:"float-right bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:this.registerVoter,children:"Register"}),this.voter.id?Object(u.jsx)(C,{can_register:"Candidate"!=this.voter.phase,candidates:this.candidates}):""]})}}]),n}(c.a.Component),D=Object(d.f)(I),P=n(123),U=n(145),J=n(415),z=(n(7),function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this)).election={name:"Unnamed",id:"none-existent-id"},e&&e.location&&e.location.state&&(i.election=e.location.state.election),i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;X.startLoading(),window.contract.election_tally.getTally(this.election.id).then((function(t){window.contract.election_candidate.list(e.election.id).then((function(n){var a,i=[],r=Object(b.a)(n);try{var s=function(){var e=a.value,n=t[0].findIndex((function(t){return t==e.key}));n>-1&&i.push({name:e.name,steps:t[1][n],href:X.ipfsUrl(e.profile_image_hash)})};for(r.s();!(a=r.n()).done;)s()}catch(o){r.e(o)}finally{r.f()}e.renderChart(i),X.stopLoading()}))}),(function(){X.stopLoading()}))}},{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{className:"text-2xl",children:[this.election.name," Tally Results"]}),Object(u.jsx)("div",{style:{"min-height":"700px"},id:"chartdiv"})]})}},{key:"renderChart",value:function(e){P.f(J.a);var t=P.d("chartdiv",U.e);t.hiddenState.properties.opacity=0,t.paddingRight=40,t.data=e;var n=t.yAxes.push(new U.a);n.dataFields.category="name",n.renderer.grid.template.strokeOpacity=0,n.renderer.minGridDistance=10,n.renderer.labels.template.dx=-40,n.renderer.minWidth=120,n.renderer.tooltip.dx=-40;var a=t.xAxes.push(new U.d);a.renderer.inside=!0,a.renderer.labels.template.fillOpacity=.3,a.renderer.grid.template.strokeOpacity=0,a.min=0,a.cursorTooltipEnabled=!1,a.renderer.baseGrid.strokeOpacity=0,a.renderer.labels.template.dy=20;var i=t.series.push(new U.c);i.dataFields.valueX="steps",i.dataFields.categoryY="name",i.tooltipText="{valueX.value}",i.tooltip.pointerOrientation="vertical",i.tooltip.dy=-30,i.columnsContainer.zIndex=100;var r=i.columns.template;r.height=P.e(50),r.maxHeight=50,r.column.cornerRadius(60,10,60,10),r.strokeOpacity=0,i.heatRules.push({target:r,property:"fill",dataField:"valueX",min:P.c("#e5dc36"),max:P.c("#5faa46")}),i.mainContainer.mask=void 0;var s=new U.f;t.cursor=s,s.lineX.disabled=!0,s.lineY.disabled=!0,s.behavior="none";var o=r.createChild(U.b);o.circle.radius=30,o.valign="middle",o.align="left",o.isMeasured=!0,o.interactionsEnabled=!1,o.horizontalCenter="right",o.interactionsEnabled=!1;o.states.create("hover");o.createChild(P.a).adapter.add("radius",(function(e,t){return t.parent.circle.pixelRadius+10}));var c,l=o.createChild(P.b);l.width=60,l.height=60,l.horizontalCenter="middle",l.verticalCenter="middle",l.propertyFields.href="href",l.adapter.add("mask",(function(e,t){return t.parent.circle})),t.cursor.events.on("cursorpositionchanged",(function(e){var t=i.tooltipDataItem;if(t.column){var n=t.column.children.getIndex(1);if(c&&c!=n&&(c.isHover=!1),c!=n)n.states.getKey("hover").properties.dx=t.column.pixelWidth,n.isHover=!0,c=n}}))}}]),n}(c.a.Component)),H=Object(d.f)(z),K=n(225),Y=(n(513),function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).messages=[],X.statusBox=Object(K.a)(e),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{className:"status-box absolute w-full max-w-5xl",children:this.messages.map((function(t){return setTimeout((function(){e.close(t)}),2e3),Object(u.jsxs)("div",{className:t.class+" h-10",children:[t.message,Object(u.jsx)("i",{className:"fas fa-window-close float-right mr-2 mt-2",onClick:function(){e.close(t)}})]})}))})}},{key:"close",value:function(e){var t=this.messages.findIndex((function(t){return e==t}));t>-1&&(this.messages.splice(t,1),this.setState({}))}},{key:"addMessage",value:function(e){this.messages.push(e),this.setState({})}}]),n}(c.a.Component)),q=[{name:"Home",path:"/",component:p,is_menu:!0},{name:"About",path:"/about",component:y,is_menu:!0},{name:"Ballot",path:"/ballot",component:f.a},{name:"Decrypt",path:"/decrypt",component:g},{name:"Elections",path:"/elections",component:_,is_menu:!0},{name:"Candidates",path:"/candidates",component:C},{name:"Candidate Form",path:"/candidate-form",component:L},{name:"Election Form",path:"/election-form",component:V},{name:"Register Voter",path:"/voter-form",component:D},{name:"Election Tally",path:"/election-tally",component:H}],G=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.call(this)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.contract.liberty_token.balance().then((function(t){e.balance=t,e.setState({})}))}},{key:"render",value:function(){return Object(u.jsxs)(l.a,{children:[Object(u.jsxs)("nav",{className:"sticky top-0 z-40 flex flex-wrap items-center justify-between px-2 bg-blueGray-500 rounded border-2 border-green-200",children:[Object(u.jsxs)("div",{className:"w-full relative flex justify-between lg:w-auto px-4 lg:static lg:block lg:justify-start",children:[Object(u.jsx)("a",{className:"text-sm font-bold leading-relaxed inline-block mr-4 py-2 whitespace-nowrap uppercase text-white",href:"/block-vote",children:Object(u.jsx)("img",{className:"rounded-lg md:w-56",src:"".concat("/block-vote","/assets/images/logo.png"),alt:"logo"})}),Object(u.jsxs)("button",{className:"cursor-pointer text-xl leading-none px-3 py-1 border border-solid border-transparent rounded bg-transparent block lg:hidden outline-none focus:outline-none",type:"button",children:[Object(u.jsx)("span",{className:"block relative w-6 h-px rounded-sm bg-white"}),Object(u.jsx)("span",{className:"block relative w-6 h-px rounded-sm bg-white mt-1"}),Object(u.jsx)("span",{className:"block relative w-6 h-px rounded-sm bg-white mt-1"})]})]}),Object(u.jsxs)("div",{className:"flex lg:flex-grow items-center",children:[Object(u.jsx)("ul",{className:"flex flex-col lg:flex-row list-none ml-auto",children:q.map((function(e,t){if(e.is_menu)return Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(l.b,{className:"px-3 py-2 flex items-center text-xs uppercase font-bold leading-snug hover:opacity-75",to:e.path,children:e.name})})}))}),Object(u.jsxs)("div",{className:"text-center w-12",children:[Object(u.jsx)("img",{src:"".concat("/block-vote","/assets/images/liberty.png")}),this.balance/1e4," LBTY"]})]})]}),Object(u.jsx)(Y,{}),Object(u.jsx)(d.c,{children:q.map((function(e){return Object(u.jsx)(d.a,{exact:!0,path:e.path,children:Object(u.jsx)("div",{className:"px-5 pb-0",children:c.a.createElement(e.component)})})}))})]})}}]),n}(c.a.Component),X=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"stopLoading",value:function(){document.getElementById("loader").classList.add("invisible"),window.loaderInterval&&(window.clearInterval(window.loaderInterval),window.loaderInterval=null)}},{key:"startLoading",value:function(){document.getElementById("loader").classList.remove("invisible");var e=document.getElementById("loader-image"),t=0;window.loaderInterval&&(window.clearInterval(window.loaderInterval),window.loaderInterval=null),window.loaderInterval=window.setInterval((function(){t+=5,e.style.transform="rotate3d(0,1,0, "+t+"deg)"}),80)}},{key:"ipfsUrl",value:function(e){var t=n(249);return e?t.ipfs.endpoint+e:"/block-vote/assets/images/image_not_available.png"}},{key:"setStatusBox",value:function(t){e.statusBox=t}},{key:"error",value:function(t){e.statusBox.addMessage({message:t,class:"error"})}},{key:"info",value:function(t){e.statusBox.addMessage({message:t,class:"info"})}},{key:"warn",value:function(t){e.statusBox.addMessage({message:t,class:"warn"})}}]),e}()},142:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var a=n(20),i=n(24),r=n(427),s=n(193),o=function(){function t(){Object(a.a)(this,t)}return Object(i.a)(t,null,[{key:"getPublicKey",value:function(){return new Promise((function(e){window.ethereum.request({method:"eth_getEncryptionPublicKey",params:[window.ethereum.selectedAddress]}).then((function(t){return e(t)}))}))}},{key:"encrypt",value:function(t,n){return s.bufferToHex(e.from(JSON.stringify(r.encrypt(n,{data:t},"x25519-xsalsa20-poly1305")),"utf8"))}},{key:"decrypt",value:function(e){return window.ethereum.request({method:"eth_decrypt",params:[e,window.ethereum.selectedAddress]})}}]),t}()}).call(this,n(11).Buffer)},188:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var a=n(20),i=n(24),r=n(28),s=n(29),o=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).contract=new window.web3.eth.Contract(e.config.contract.election.abi_interface,e.config.contract.election.address),e}return Object(i.a)(n,[{key:"create",value:function(e){return this.contract.methods.createElection(e).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"read",value:function(e){return this.contract.methods.readElection(e).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"delete",value:function(e){return this.contract.methods.deleteElection(e).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"list",value:function(){return this.contract.methods.listElections().call()}},{key:"listIds",value:function(){return this.contract.methods.listElectionIds().call()}},{key:"endCandidate",value:function(e){return this.contract.methods.endCandidate(e).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"endRegistration",value:function(e){return this.contract.methods.endRegistration(e).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"endVoting",value:function(e){return this.contract.methods.endVoting(e).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"endTally",value:function(e){return this.contract.methods.endTally(e).send({from:window.ethereum.selectedAddress,gas:5e6})}}]),n}(n(82).a),c=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Candidate",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0;Object(a.a)(this,e),this.id=t,this.name=n,this.phase=i,this.elected_candidate_id=r,this.image_cid=s}},226:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var a=n(20),i=n(24),r=n(28),s=n(29),o=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).contract=new window.web3.eth.Contract(e.config.contract.voting_booth.abi_interface,e.config.contract.voting_booth.address),e}return Object(i.a)(n,[{key:"submitEncryptedMessages",value:function(e,t){return 0==t.length?Promise.resolve():this.contract.methods.submitEncryptedMessages(e,t).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"getEncryptedMessages",value:function(e){return this.contract.methods.getEncryptedMessages(e).call({from:window.ethereum.selectedAddress})}},{key:"clearEncryptedMessages",value:function(e){return this.contract.methods.clearEncryptedMessages(e).send({from:window.ethereum.selectedAddress,gas:1e6})}},{key:"getBatch",value:function(e){return this.contract.methods.getBatch(e).call({from:window.ethereum.selectedAddress})}}]),n}(n(82).a),c=function e(t,n){Object(a.a)(this,e),this.blockchain_address=n,this.message=t}},229:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var a=n(228),i=n(169),r=n(20),s=n(24),o=n(28),c=n(29),l=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).contract=null,e.contract=new window.web3.eth.Contract(e.config.contract.election_candidate.abi_interface,e.config.contract.election_candidate.address),e}return Object(s.a)(n,[{key:"createCandidate",value:function(e,t){return this.contract.methods.createCandidate(e,t).send({from:window.ethereum.selectedAddress,gas:1e6})}},{key:"updateCandidate",value:function(e,t){return this.contract.methods.updateCandidate(e,t).send({from:window.ethereum.selectedAddress,gas:1e6})}},{key:"readCandidate",value:function(e,t){return this.contract.methods.readCandidate(e,t).call()}},{key:"deleteCandidate",value:function(e,t){return this.contract.methods.deleteCandidate(e,t).send({from:window.ethereum.selectedAddress,gas:1e6})}},{key:"list",value:function(e){return this.contract.methods.listCandidates(e).call().then((function(e){return Promise.resolve(e.map((function(e){return Object(a.a)(d,Object(i.a)(e))})))}))}},{key:"listIds",value:function(e){return this.contract.methods.listCandidateIds(e).call()}}]),n}(n(82).a),d=function e(t,n,a,i,s,o){Object(r.a)(this,e),this.id=t,this.name=n,this.election_id=a,this.key=i,this.profile_image_hash=s,this.profile_image_url=o}},230:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var a=n(20),i=n(24),r=n(28),s=n(29),o=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).contract=new window.web3.eth.Contract(e.config.contract.voter_registration.abi_interface,e.config.contract.voter_registration.address),e}return Object(i.a)(n,[{key:"register",value:function(e,t){return this.contract.methods.registerVoter(e,t).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"getTurnout",value:function(e){return this.contract.methods.getTurnout(e).call()}},{key:"getVoters",value:function(e,t){return this.contract.methods.getVoters(e,t).call()}},{key:"setRewardBearer",value:function(e){return this.contract.methods.setRewardBearer(e).send({from:window.ethereum.selectedAddress,gas:5e6})}}]),n}(n(82).a),c=function e(t,n,i,r){Object(a.a)(this,e),this.id=t,this.blockchain_address=n,this.nin=i,this.voted=r}},249:function(e){e.exports=JSON.parse('{"ipfs":{"host":"ipfs.infura.io","port":5001,"protocol":"https","endpoint":"https://ipfs.infura.io/ipfs/"}}')},409:function(e,t,n){"use strict";(function(e){var a=n(16),i=n.n(a),r=n(141),s=n(20),o=n(24),c=n(28),l=n(29),d=n(186),u=n(26),p=n.n(u),y=n(92),f=n(142),b=n(226),m=n(56),h=n(111),g=n(9),v=(n(502),function(t){Object(c.a)(a,t);var n=Object(l.a)(a);function a(e){var t;return Object(s.a)(this,a),(t=n.call(this,e)).election=e.location.state.election,t.state={candidates:e.location.state.candidates,decryptors:[],decryptors2:[]},t}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.contract.voting_booth.getBatch(this.election.id).then((function(t){window.contract.voter_registration.getVoters(e.election.id,t).then((function(t){e.state.decryptors=y.a.shuffle(Array.from(t)),e.state.decryptors2=y.a.shuffle(Array.from(t))}))}))}},{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{className:"ballot",children:[Object(g.jsx)("h1",{className:"text-2xl",children:"Ballot"}),this.state.candidates.map((function(t){return Object(g.jsxs)("div",{className:" w-full lg:max-w-full lg:flex",children:[Object(g.jsx)("div",{className:"h-48 lg:h-auto lg:w-48 flex-none bg-cover border-2 border-green-400 rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden",style:{"background-image":"url('"+h.a.ipfsUrl(t.profile_image_hash)+"')"},title:"Mountain"}),Object(g.jsx)("div",{className:"w-full border-r border-b border-l border-gray-400 lg:border-l-0 lg:border-t lg:border-gray-400 bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal",onClick:function(){return e.vote(t)},children:Object(g.jsxs)("div",{className:"mb-8",children:[Object(g.jsx)("p",{className:"text-sm text-gray-600 flex items-center"}),Object(g.jsx)("div",{className:"text-gray-900 font-bold text-xl mb-2",children:t.name})]})})]})}))]})}},{key:"toHexString",value:function(e){return Array.from(e,(function(e){return("0"+(255&e).toString(16)).slice(-2)})).join("")}},{key:"vote",value:function(t){var n=this;h.a.startLoading();for(var a={id:y.a.uuidv4(),candidate_key:t.key},s=this.state.decryptors.length,o=t.key,c=[],l=[],u=[],p=0;p<o.length;p++){var m=this.state.decryptors[p%s].public_key,g={vote_id:a.id,candidate_key_fragment:o[p],candidate_key_fragment_position:p,election_id:this.election.id};u.push(f.a.encrypt(JSON.stringify(g),e.from(m)))}(function(){var e=Object(r.a)(i.a.mark((function e(){var t,a,o,p,y,m,h,g,v,j,w,x,O,_,k,T,C,N,E,M,R,A,B;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ipfs.add(u);case 2:t=e.sent,a=[],o=0,p=!0,y=!1,e.prev=7,h=Object(d.a)(t);case 9:return e.next=11,h.next();case 11:return g=e.sent,p=g.done,e.next=15,g.value;case 15:if(v=e.sent,p){e.next=29;break}j=v,w=n.state.decryptors[o%s],console.log("shooting file"),x=j.path,O={blockchain_address:w.blockchain_address,message:x},_=n.state.decryptors2[o%s],k=_.public_key,a.push(f.a.encrypt(JSON.stringify(O),k)),o+=1;case 26:p=!0,e.next=9;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(7),y=!0,m=e.t0;case 35:if(e.prev=35,e.prev=36,p||null==h.return){e.next=40;break}return e.next=40,h.return();case 40:if(e.prev=40,!y){e.next=43;break}throw m;case 43:return e.finish(40);case 44:return e.finish(35);case 45:return e.next=47,window.ipfs.add(a);case 47:T=e.sent,o=0,C=!0,N=!1,e.prev=51,M=function(){var e=B,t=n.state.decryptors2[o%s];l.push(new Promise(function(){var n=Object(r.a)(i.a.mark((function n(a,r){var s,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=e.path,o=new b.a(s,t.blockchain_address),c.push(o),a();case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())),o+=1},R=Object(d.a)(T);case 54:return e.next=56,R.next();case 56:return A=e.sent,C=A.done,e.next=60,A.value;case 60:if(B=e.sent,C){e.next=66;break}M();case 63:C=!0,e.next=54;break;case 66:e.next=72;break;case 68:e.prev=68,e.t1=e.catch(51),N=!0,E=e.t1;case 72:if(e.prev=72,e.prev=73,C||null==R.return){e.next=77;break}return e.next=77,R.return();case 77:if(e.prev=77,!N){e.next=80;break}throw E;case 80:return e.finish(77);case 81:return e.finish(72);case 82:case"end":return e.stop()}}),e,null,[[7,31,35,45],[36,,40,44],[51,68,72,82],[73,,77,81]])})));return function(){return e.apply(this,arguments)}})()().then((function(){console.log("Before promises"),Promise.all(l).then((function(){window.contract.voting_booth.submitEncryptedMessages(n.election.id,c).then((function(){h.a.error("Successfully cast vote"),h.a.stopLoading()}),(function(){h.a.error("Failed to cast vote"),h.a.stopLoading()})),console.log("after promises")}))}))}}]),a}(p.a.Component));t.a=Object(m.f)(v)}).call(this,n(11).Buffer)},413:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var a=n(20),i=n(24),r=n(28),s=n(29),o=function(t){Object(r.a)(o,t);var n=Object(s.a)(o);function o(){var e;return Object(a.a)(this,o),(e=n.call(this)).contract=new window.web3.eth.Contract(e.config.contract.liberty_token.abi_interface,e.config.contract.liberty_token.address),e}return Object(i.a)(o,[{key:"totalSupply",value:function(){return this.contract.methods.totalSupply().call()}},{key:"balance",value:function(){return this.contract.methods.balanceOf(window.ethereum.selectedAddress).call()}},{key:"transfer",value:function(e,t){return this.contract.methods.transfer(e,t).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"approve",value:function(e,t){return this.contract.methods.approve(e,t).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"transferFrom",value:function(e,t,n){return this.contract.methods.transferFrom(e,t,n).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"allowance",value:function(e,t){return this.contract.methods.allowance(e,t).call()}},{key:"fund",value:function(t,n){return this.contract.methods.fund(window.contract.reward_bearer.contract.options.address,n,e.from(t)).send({from:window.ethereum.selectedAddress,gas:5e6})}}]),o}(n(82).a)}).call(this,n(11).Buffer)},414:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var a=n(20),i=n(24),r=n(28),s=n(29),o=function(t){Object(r.a)(o,t);var n=Object(s.a)(o);function o(){var e;return Object(a.a)(this,o),(e=n.call(this)).contract=new window.web3.eth.Contract(e.config.contract.election_reward.abi_interface,e.config.contract.election_reward.address),e}return Object(i.a)(o,[{key:"balance",value:function(e){return this.contract.methods.balanceOf(e).call()}},{key:"fundsRewarded",value:function(e){return this.contract.methods.fundsRewarded(e).call()}},{key:"totalFunds",value:function(e){return this.contract.methods.totalFunds(e).call()}},{key:"setVoterRegistrationContract",value:function(e){return this.contract.methods.setVoterRegistrationContract(e).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"eligibleForReward",value:function(t,n){return this.contract.methods.eligibleForReward(t,window.ethereum.selectedAddress,e.from(n)).call()}}]),o}(n(82).a)}).call(this,n(11).Buffer)},423:function(e,t,n){},425:function(e,t,n){},438:function(e,t){},440:function(e,t){},454:function(e,t){},455:function(e,t){},475:function(e,t){},480:function(e,t){},482:function(e,t){},500:function(e,t){},512:function(e,t,n){},513:function(e,t,n){},521:function(e,t){},528:function(e,t){},620:function(e,t){},622:function(e,t){},627:function(e,t){},629:function(e,t){},636:function(e,t){},637:function(e,t){},639:function(e,t){},651:function(e,t){},654:function(e,t){},702:function(e){e.exports=JSON.parse('{"election":{"abi_interface":[{"inputs":[{"components":[{"internalType":"string","name":"id","type":"string"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"phase","type":"string"},{"internalType":"string","name":"elected_candidate_id","type":"string"},{"internalType":"string","name":"image_cid","type":"string"}],"internalType":"struct ElectionContract.Election","name":"election","type":"tuple"}],"name":"createElection","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"readElection","outputs":[{"components":[{"internalType":"string","name":"id","type":"string"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"phase","type":"string"},{"internalType":"string","name":"elected_candidate_id","type":"string"},{"internalType":"string","name":"image_cid","type":"string"}],"internalType":"struct ElectionContract.Election","name":"","type":"tuple"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"deleteElection","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"listElectionIds","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"listElections","outputs":[{"components":[{"internalType":"string","name":"id","type":"string"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"phase","type":"string"},{"internalType":"string","name":"elected_candidate_id","type":"string"},{"internalType":"string","name":"image_cid","type":"string"}],"internalType":"struct ElectionContract.Election[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"endCandidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"endRegistration","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"endVoting","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"endTally","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"setVotingBoothAddress","outputs":[],"stateMutability":"nonpayable","type":"function"}],"address":"0x6D03ef5CFaE6Ae6C60c487Af7b585FdF28612d44"},"election_candidate":{"abi_interface":[{"inputs":[{"internalType":"string","name":"_election_id","type":"string"},{"components":[{"internalType":"string","name":"id","type":"string"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"election_id","type":"string"},{"internalType":"string","name":"key","type":"string"},{"internalType":"string","name":"profile_image_hash","type":"string"},{"internalType":"string","name":"profile_image_url","type":"string"}],"internalType":"struct ElectionCandidateContract.CandidateInfo","name":"_candidateinfo","type":"tuple"}],"name":"createCandidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_election_id","type":"string"},{"internalType":"string","name":"_candidate_id","type":"string"}],"name":"readCandidate","outputs":[{"components":[{"internalType":"string","name":"id","type":"string"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"election_id","type":"string"},{"internalType":"string","name":"key","type":"string"},{"internalType":"string","name":"profile_image_hash","type":"string"},{"internalType":"string","name":"profile_image_url","type":"string"}],"internalType":"struct ElectionCandidateContract.CandidateInfo","name":"","type":"tuple"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"string","name":"_election_id","type":"string"},{"components":[{"internalType":"string","name":"id","type":"string"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"election_id","type":"string"},{"internalType":"string","name":"key","type":"string"},{"internalType":"string","name":"profile_image_hash","type":"string"},{"internalType":"string","name":"profile_image_url","type":"string"}],"internalType":"struct ElectionCandidateContract.CandidateInfo","name":"_candidateinfo","type":"tuple"}],"name":"updateCandidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_election_id","type":"string"},{"internalType":"string","name":"_candidate_id","type":"string"}],"name":"deleteCandidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"listCandidateIds","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"listCandidates","outputs":[{"components":[{"internalType":"string","name":"id","type":"string"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"election_id","type":"string"},{"internalType":"string","name":"key","type":"string"},{"internalType":"string","name":"profile_image_hash","type":"string"},{"internalType":"string","name":"profile_image_url","type":"string"}],"internalType":"struct ElectionCandidateContract.CandidateInfo[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"listCandidateKeys","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function","constant":true}],"address":"0x114eadc752fe2e2F96c0D694fdeE2D8D3Cb02cEC"},"election_tally":{"abi_interface":[{"inputs":[{"internalType":"string","name":"election_id","type":"string"},{"components":[{"internalType":"string","name":"election_id","type":"string"},{"internalType":"string","name":"candidate_key_fragment","type":"string"},{"internalType":"uint256","name":"candidate_key_fragment_position","type":"uint256"},{"internalType":"string","name":"vote_id","type":"string"}],"internalType":"struct VotingDomain.VoteFragment[]","name":"fragments","type":"tuple[]"}],"name":"submitVoteFragments","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"setCandidateContractAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"getTally","outputs":[{"internalType":"string[]","name":"","type":"string[]"},{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function","constant":true}],"address":"0x1631A3A7CcF24732dA06eC13f5ab26B963878DC3"},"voter_registration":{"abi_interface":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"},{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"address","name":"blockchain_address","type":"address"},{"internalType":"string","name":"nin","type":"string"},{"internalType":"bool","name":"voted","type":"bool"}],"internalType":"struct Voter","name":"voter","type":"tuple"}],"name":"registerVoter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IRewardBearer","name":"bearer","type":"address"}],"name":"setRewardBearer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"getTurnout","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"string","name":"election_id","type":"string"},{"internalType":"address","name":"addr","type":"address"}],"name":"isRegistered","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function","constant":true}],"address":"0xd278Bde66b5bef0336F9B399D97c256F58075525"},"voting_booth":{"abi_interface":[{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"setVoterRegistrationContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"},{"components":[{"internalType":"address","name":"blockchain_address","type":"address"},{"internalType":"string","name":"message","type":"string"}],"internalType":"struct EncryptionDomain.EncryptedMessage[]","name":"m","type":"tuple[]"}],"name":"submitEncryptedMessages","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"},{"internalType":"address","name":"sender","type":"address"}],"name":"getEncryptedMessages","outputs":[{"components":[{"internalType":"address","name":"blockchain_address","type":"address"},{"internalType":"string","name":"message","type":"string"}],"internalType":"struct EncryptionDomain.EncryptedMessage[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"clearEncryptedMessages","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"prepareVoterBatches","outputs":[],"stateMutability":"nonpayable","type":"function"}],"address":"0x214Bbdd01b1cCFB94Aa731826c6e975bC4F5bEDC"},"liberty_token":{"abi_interface":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_owner","type":"address"},{"indexed":true,"internalType":"address","name":"_spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"_value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_from","type":"address"},{"indexed":true,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"allowed","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balances","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"totalsupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"success","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_spender","type":"address"},{"internalType":"uint256","name":"_value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"success","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_from","type":"address"},{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"success","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"},{"internalType":"address","name":"_spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"contract IRewardBearer","name":"bearer","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"options","type":"bytes"}],"name":"fund","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}],"address":"0x01ebe409f84B7f06c922636DCEAEb1038E0B92f5"},"election_reward":{"abi_interface":[{"inputs":[{"internalType":"contract IRewardToken","name":"_token","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"contract VoterRegistrationContract","name":"_voter_registration","type":"address"}],"name":"setVoterRegistrationContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"reward_id","type":"uint8"},{"internalType":"address","name":"receiver","type":"address"},{"internalType":"bytes","name":"options","type":"bytes"}],"name":"eligibleForReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"options","type":"bytes"}],"name":"fundProvided","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"reward_id","type":"uint8"},{"internalType":"address","name":"receiver","type":"address"},{"internalType":"bytes","name":"options","type":"bytes"}],"name":"claimReward","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"fundsRewarded","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"election_id","type":"string"}],"name":"totalFunds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}],"address":"0x22c6eb7773cD222F0350C145CaAeFDc3b288Fa4E"}}')},718:function(e,t){},82:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(20),i=function e(){Object(a.a)(this,e),this.config=null,this.config=n(249)}},915:function(e,t,n){"use strict";n.r(t);var a=n(16),i=n.n(a),r=n(141),s=n(26),o=n.n(s),c=n(408),l=n.n(c),d=(n(423),n(111)),u=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,1114)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),r(e),s(e)}))},p=n(411),y=n.n(p),f=n(226),b=n(188),m=n(229),h=n(230),g=n(20),v=n(24),j=n(28),w=n(29),x=function(e){Object(j.a)(n,e);var t=Object(w.a)(n);function n(){var e;return Object(g.a)(this,n),(e=t.call(this)).contract=new window.web3.eth.Contract(e.config.contract.election_tally.abi_interface,e.config.contract.election_tally.address),e}return Object(v.a)(n,[{key:"submitVoteFragments",value:function(e,t){return 0==t.length?Promise.resolve():this.contract.methods.submitVoteFragments(e,t).send({from:window.ethereum.selectedAddress,gas:5e6})}},{key:"getTally",value:function(e){return this.contract.methods.getTally(e).call()}}]),n}(n(82).a),O=n(413),_=n(414),k=n(9),T=n(249);T.contract=n(702);var C=n(703);function N(){return(N=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=4;break}return e.next=3,window.ethereum.enable();case 3:window.web3=new y.a(window.ethereum);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return N.apply(this,arguments)})().then((function(){window.contract={election:new b.b,election_candidate:new m.b,voting_booth:new f.b,election_tally:new x,voter:new h.b,liberty_token:new O.a,reward_bearer:new _.a},window.ipfs=C({host:T.ipfs.host,port:T.ipfs.port,protocol:T.ipfs.protocol}),l.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(d.b,{})}),document.getElementById("root"))})),u()},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(20),i=n(24),r=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"uuidv4",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}},{key:"clashid",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["1","2","3"],n=[],a=0;a<e;a++)n.push(t[parseInt(3*Math.random())]);return n.join("")}},{key:"shuffle",value:function(e){for(var t,n,a=e.length;0!==a;)n=Math.floor(Math.random()*a),t=e[a-=1],e[a]=e[n],e[n]=t;return e}}]),e}()}},[[915,1,3]]]);
//# sourceMappingURL=main.6de1f037.chunk.js.map